{
  "test_name": "优化后的登录测试示例",
  "description": "展示如何使用页面辅助脚本进行快速测试",
  "url": "https://example.com/login",
  "optimization_enabled": true,
  "steps": [
    {
      "action": "navigate",
      "url": "https://example.com/login",
      "description": "导航到登录页面"
    },
    {
      "action": "evaluate_script",
      "function": "() => { const script = document.createElement('script'); script.textContent = `/* page_helper.js 的内容 */`; document.head.appendChild(script); }",
      "description": "注入页面辅助脚本（首次执行时）",
      "note": "实际使用时，需要将 scripts/page_helper.js 的内容嵌入到这里"
    },
    {
      "action": "evaluate_script",
      "function": "() => { return window.__testHelper.quickFind('登录按钮'); }",
      "description": "快速查找登录按钮（替代 snapshot）",
      "save_result_as": "loginButtonInfo"
    },
    {
      "action": "evaluate_script",
      "function": "() => { return window.__testHelper.batch.execute([{action: 'fill', target: '用户名输入框', value: 'testuser'}, {action: 'fill', target: '密码输入框', value: 'testpass'}, {action: 'click', target: '登录按钮'}]); }",
      "description": "批量执行：填写表单并点击登录（1次调用完成3个操作）"
    },
    {
      "action": "wait_for",
      "text": "欢迎",
      "timeout": 5000,
      "description": "等待登录成功"
    },
    {
      "action": "evaluate_script",
      "function": "() => { return window.__testHelper.validate.validate([{type: 'url_contains', expectedValue: '/dashboard'}, {type: 'element_exists', target: '用户菜单'}, {type: 'text_contains', target: '欢迎消息', expectedValue: 'testuser'}]); }",
      "description": "批量验证：URL、元素存在、文本内容（1次调用完成3个验证）"
    }
  ],
  "expected_results": [
    {
      "type": "url_contains",
      "expected_value": "/dashboard",
      "description": "验证跳转到仪表盘"
    },
    {
      "type": "element_exists",
      "target": "用户菜单",
      "description": "验证用户菜单存在"
    }
  ],
  "performance_notes": {
    "estimated_time": "5-10秒（优化前需要30-50秒）",
    "optimization_gain": "5-10倍速度提升",
    "key_optimizations": [
      "使用 quickFind 替代 snapshot（减少90%查找时间）",
      "批量操作减少 MCP 调用次数（3次调用合并为1次）",
      "批量验证提高效率（3次验证合并为1次）"
    ]
  }
}

