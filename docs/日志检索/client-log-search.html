<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>客户端日志检索平台</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #3b82f6;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
        }
        
        body {
            background: #f8fafc;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .search-box {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }
        
        .log-line {
            font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;
            font-size: 13px;
            line-height: 1.6;
        }
        
        .log-line:hover {
            background: #f1f5f9;
        }
        
        .log-error {
            background: #fef2f2;
            border-left: 3px solid #ef4444;
        }
        
        .log-warning {
            background: #fffbeb;
            border-left: 3px solid #f59e0b;
        }
        
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .badge-error { background: #fee2e2; color: #dc2626; }
        .badge-warning { background: #fef3c7; color: #d97706; }
        .badge-success { background: #d1fae5; color: #059669; }
        .badge-info { background: #dbeafe; color: #2563eb; }
        .badge-gray { background: #f3f4f6; color: #4b5563; }
        
        .tab-btn {
            padding: 12px 20px;
            border-bottom: 2px solid transparent;
            color: #6b7280;
            font-weight: 500;
            transition: all 0.2s;
        }
        
        .tab-btn:hover {
            color: #3b82f6;
        }
        
        .tab-btn.active {
            color: #3b82f6;
            border-bottom-color: #3b82f6;
        }
        
        .progress-bar {
            height: 8px;
            border-radius: 4px;
            background: #e5e7eb;
            overflow: hidden;
        }
        
        .progress-bar-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .pattern-card {
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            transition: all 0.2s;
            cursor: pointer;
        }
        
        .pattern-card:hover {
            border-color: #3b82f6;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
        }

        .breadcrumb a {
            color: #6b7280;
        }
        
        .breadcrumb a:hover {
            color: #3b82f6;
        }

        .page { display: none; }
        .page.active { display: block; }

        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }

        .stat-card {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        }
        
        .stat-card.orange {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }
        
        .stat-card.green {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        .stat-card.purple {
            background: linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%);
        }
        
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .prose pre {
            margin: 1rem 0;
        }
    </style>
</head>
<body class="min-h-screen">
    <div class="max-w-7xl mx-auto px-6 py-8">
        
        <!-- ==================== 页面1: 搜索首页 ==================== -->
        <div id="page-search" class="page active">
            <!-- Logo和标题 -->
            <div class="text-center mb-12 pt-16">
                <div class="inline-flex items-center justify-center w-16 h-16 bg-blue-500 rounded-2xl mb-6">
                    <i class="fas fa-search text-white text-2xl"></i>
                </div>
                <h1 class="text-3xl font-bold text-gray-800 mb-2">客户端日志检索平台</h1>
                <p class="text-gray-500">搜索用户，查看日志，分析问题模式</p>
            </div>
            
            <!-- 搜索框 -->
            <div class="max-w-2xl mx-auto">
                <div class="search-box p-2">
                    <div class="flex items-center">
                        <select id="searchType" class="px-4 py-3 border-r border-gray-200 bg-transparent focus:outline-none text-gray-600">
                            <option value="user_id">用户ID</option>
                            <option value="device_id">设备ID</option>
                            <option value="phone">手机号</option>
                            <option value="role_id">角色ID</option>
                        </select>
                        <input type="text" 
                               id="searchInput"
                               placeholder="输入用户ID或设备ID进行搜索..." 
                               class="flex-1 px-4 py-3 focus:outline-none text-lg">
                        <button onclick="doSearch()" class="px-6 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition font-medium">
                            <i class="fas fa-search mr-2"></i>搜索
                        </button>
                    </div>
                </div>
                
                <!-- 最近搜索 -->
                <div class="mt-6 flex items-center justify-center space-x-4 text-sm">
                    <span class="text-gray-400"><i class="fas fa-history mr-1"></i>最近搜索：</span>
                    <button onclick="quickSearch('10086001')" class="text-blue-500 hover:underline">10086001</button>
                    <button onclick="quickSearch('DEVICE_A1B2C3')" class="text-blue-500 hover:underline">DEVICE_A1B2C3</button>
                    <button onclick="quickSearch('10086002')" class="text-blue-500 hover:underline">10086002</button>
                </div>
            </div>
            
            <!-- 快捷入口 -->
            <div class="max-w-3xl mx-auto mt-16">
                <div class="grid grid-cols-3 gap-4">
                    <div onclick="showPage('page-patterns')" class="card p-6 cursor-pointer hover:shadow-md transition">
                        <div class="flex items-center space-x-4">
                            <div class="w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center">
                                <i class="fas fa-layer-group text-red-500 text-xl"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-800">日志模式</h3>
                                <p class="text-sm text-gray-500">按问题模式浏览分析</p>
                            </div>
                        </div>
                    </div>
                    <div onclick="showPage('page-version')" class="card p-6 cursor-pointer hover:shadow-md transition">
                        <div class="flex items-center space-x-4">
                            <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center">
                                <i class="fas fa-code-branch text-purple-500 text-xl"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-800">版本比对</h3>
                                <p class="text-sm text-gray-500">对比不同版本的问题模式</p>
                            </div>
                        </div>
                    </div>
                    <div class="card p-6 cursor-pointer hover:shadow-md transition">
                        <div class="flex items-center space-x-4">
                            <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center">
                                <i class="fas fa-cog text-green-500 text-xl"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-800">规则配置</h3>
                                <p class="text-sm text-gray-500">配置日志模式识别规则</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== 页面2: 用户日志列表 ==================== -->
        <div id="page-user-logs" class="page">
            <!-- 面包屑 -->
            <nav class="breadcrumb flex items-center space-x-2 text-sm mb-6">
                <a href="#" onclick="showPage('page-search')"><i class="fas fa-home"></i></a>
                <span class="text-gray-400">/</span>
                <span class="text-gray-800 font-medium">用户日志列表</span>
            </nav>
            
            <!-- 用户信息卡片 -->
            <div class="card p-6 mb-6">
                <div class="flex items-start justify-between">
                    <div class="flex items-center space-x-4">
                        <div class="w-14 h-14 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center">
                            <i class="fas fa-user text-white text-xl"></i>
                        </div>
                        <div>
                            <h2 class="text-xl font-bold text-gray-800">用户 10086001</h2>
                            <p class="text-gray-500 text-sm">设备ID: DEVICE_A1B2C3D4E5</p>
                        </div>
                    </div>
                    <div class="text-right text-sm text-gray-500">
                        <p>最近活跃: 2026-01-15 14:32</p>
                        <p>累计上报: <span class="font-semibold text-gray-800">12次</span></p>
                    </div>
                </div>
                
                <div class="grid grid-cols-4 gap-6 mt-6 pt-6 border-t border-gray-100">
                    <div>
                        <p class="text-xs text-gray-400 mb-1">设备型号</p>
                        <p class="font-medium text-gray-800">iPhone 15 Pro Max</p>
                    </div>
                    <div>
                        <p class="text-xs text-gray-400 mb-1">操作系统</p>
                        <p class="font-medium text-gray-800">iOS 17.2.1</p>
                    </div>
                    <div>
                        <p class="text-xs text-gray-400 mb-1">当前App版本</p>
                        <p class="font-medium text-gray-800">v3.2.1 (1024)</p>
                    </div>
                    <div>
                        <p class="text-xs text-gray-400 mb-1">网络状态</p>
                        <p class="font-medium text-gray-800">WiFi</p>
                    </div>
                </div>
            </div>
            
            <!-- 日志上报记录列表 -->
            <div class="card overflow-hidden">
                <div class="p-4 border-b border-gray-100 flex items-center justify-between">
                    <h3 class="font-semibold text-gray-800">日志上报记录</h3>
                    <div class="flex items-center space-x-3">
                        <select class="px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option>全部记录</option>
                            <option>包含异常</option>
                            <option>包含性能问题</option>
                        </select>
                    </div>
                </div>
                
                <div class="divide-y divide-gray-100">
                    <!-- 记录1 -->
                    <div class="p-4 hover:bg-gray-50 cursor-pointer transition" onclick="showPage('page-log-detail')">
                        <div class="flex items-start justify-between">
                            <div>
                                <div class="flex items-center space-x-3 mb-2">
                                    <span class="font-medium text-gray-800">2026-01-15 14:32:18</span>
                                    <span class="badge badge-info">v3.2.1</span>
                                </div>
                                <p class="text-sm text-gray-500 mb-2">
                                    <i class="fas fa-comment-alt mr-1 text-gray-400"></i>
                                    "游戏进入副本时闪退，已经发生好几次了"
                                </p>
                                <div class="flex items-center space-x-2">
                                    <span class="badge badge-error"><i class="fas fa-bug mr-1"></i>异常(1)</span>
                                    <span class="badge badge-warning"><i class="fas fa-tachometer-alt mr-1"></i>性能问题(2)</span>
                                </div>
                            </div>
                            <i class="fas fa-chevron-right text-gray-300 mt-2"></i>
                        </div>
                    </div>
                    
                    <!-- 记录2 -->
                    <div class="p-4 hover:bg-gray-50 cursor-pointer transition" onclick="showPage('page-log-detail')">
                        <div class="flex items-start justify-between">
                            <div>
                                <div class="flex items-center space-x-3 mb-2">
                                    <span class="font-medium text-gray-800">2026-01-14 09:15:42</span>
                                    <span class="badge badge-info">v3.2.1</span>
                                </div>
                                <p class="text-sm text-gray-500 mb-2">
                                    <i class="fas fa-comment-alt mr-1 text-gray-400"></i>
                                    "战斗中卡顿严重，帧率很低"
                                </p>
                                <div class="flex items-center space-x-2">
                                    <span class="badge badge-warning"><i class="fas fa-tachometer-alt mr-1"></i>性能问题(3)</span>
                                </div>
                            </div>
                            <i class="fas fa-chevron-right text-gray-300 mt-2"></i>
                        </div>
                    </div>
                    
                    <!-- 记录3 -->
                    <div class="p-4 hover:bg-gray-50 cursor-pointer transition" onclick="showPage('page-log-detail')">
                        <div class="flex items-start justify-between">
                            <div>
                                <div class="flex items-center space-x-3 mb-2">
                                    <span class="font-medium text-gray-800">2026-01-12 20:45:33</span>
                                    <span class="badge badge-info">v3.2.0</span>
                                </div>
                                <p class="text-sm text-gray-500 mb-2">
                                    <i class="fas fa-comment-alt mr-1 text-gray-400"></i>
                                    "频繁断线重连"
                                </p>
                                <div class="flex items-center space-x-2">
                                    <span class="badge badge-gray"><i class="fas fa-wifi mr-1"></i>网络问题(2)</span>
                                </div>
                            </div>
                            <i class="fas fa-chevron-right text-gray-300 mt-2"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== 页面3: 日志详情 ==================== -->
        <div id="page-log-detail" class="page">
            <!-- 面包屑 -->
            <nav class="breadcrumb flex items-center space-x-2 text-sm mb-6">
                <a href="#" onclick="showPage('page-search')"><i class="fas fa-home"></i></a>
                <span class="text-gray-400">/</span>
                <a href="#" onclick="showPage('page-user-logs')">用户 10086001</a>
                <span class="text-gray-400">/</span>
                <span class="text-gray-800 font-medium">日志详情</span>
            </nav>
            
            <!-- 顶部信息栏 -->
            <div class="card p-4 mb-6">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-6">
                        <div>
                            <span class="text-xs text-gray-400">用户ID</span>
                            <p class="font-medium text-gray-800">10086001</p>
                        </div>
                        <div>
                            <span class="text-xs text-gray-400">上报时间</span>
                            <p class="font-medium text-gray-800">2026-01-15 14:32:18</p>
                        </div>
                        <div>
                            <span class="text-xs text-gray-400">设备信息</span>
                            <p class="font-medium text-gray-800">iPhone 15 Pro Max | iOS 17.2.1 | v3.2.1</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-2">
                        <button class="px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">
                            <i class="fas fa-download mr-1"></i>下载
                        </button>
                        <button class="px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">
                            <i class="fas fa-share-alt mr-1"></i>分享
                        </button>
                    </div>
                </div>
                
                <!-- 用户反馈 -->
                <div class="mt-4 p-3 bg-blue-50 rounded-lg border border-blue-100">
                    <div class="flex items-start space-x-2">
                        <i class="fas fa-comment-dots text-blue-500 mt-0.5"></i>
                        <div>
                            <span class="text-xs text-blue-600 font-medium">用户反馈</span>
                            <p class="text-gray-700 text-sm">"游戏进入副本时闪退，已经发生好几次了，每次都是加载到一半就闪退"</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Tab切换 -->
            <div class="card overflow-hidden">
                <div class="flex border-b border-gray-200">
                    <button class="tab-btn active" onclick="switchLogTab(this, 'patterns')">
                        <i class="fas fa-layer-group mr-2"></i>日志模式
                    </button>
                    <button class="tab-btn" onclick="switchLogTab(this, 'raw')">
                        <i class="fas fa-file-alt mr-2"></i>原始日志
                    </button>
                </div>
                
                <!-- 日志模式 Tab -->
                <div id="tab-patterns" class="p-6">
                    <p class="text-sm text-gray-500 mb-4">从该日志中识别出 <span class="font-semibold text-gray-800">3</span> 个问题模式</p>
                    
                    <div class="space-y-4">
                        <!-- 模式卡片1 -->
                        <div class="pattern-card p-4" onclick="showPage('page-pattern-analysis')">
                            <div class="flex items-start justify-between">
                                <div class="flex-1">
                                    <div class="flex items-center space-x-2 mb-2">
                                        <span class="badge badge-error">异常</span>
                                        <span class="font-medium text-gray-800">NullReferenceException</span>
                                    </div>
                                    <p class="text-sm text-gray-500 font-mono mb-3">
                                        at BossController.Initialize() [0x0001a] in BossController.cs:128
                                    </p>
                                    <div class="flex items-center space-x-4 text-sm text-gray-400">
                                        <span><i class="fas fa-repeat mr-1"></i>本日志出现 1 次</span>
                                    </div>
                                </div>
                                <div class="flex flex-col space-y-2 ml-4">
                                    <button onclick="event.stopPropagation(); showPage('page-pattern-analysis')" class="px-3 py-1.5 text-xs bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100">
                                        <i class="fas fa-chart-bar mr-1"></i>维度分析
                                    </button>
                                    <button onclick="event.stopPropagation(); showPage('page-pattern-analysis')" class="px-3 py-1.5 text-xs bg-gray-50 text-gray-600 rounded-lg hover:bg-gray-100">
                                        <i class="fas fa-users mr-1"></i>影响范围
                                    </button>
                                    <button onclick="event.stopPropagation(); switchLogTab(document.querySelector('.tab-btn:nth-child(2)'), 'raw')" class="px-3 py-1.5 text-xs bg-gray-50 text-gray-600 rounded-lg hover:bg-gray-100">
                                        <i class="fas fa-crosshairs mr-1"></i>定位日志
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 模式卡片2 -->
                        <div class="pattern-card p-4" onclick="showPage('page-pattern-analysis')">
                            <div class="flex items-start justify-between">
                                <div class="flex-1">
                                    <div class="flex items-center space-x-2 mb-2">
                                        <span class="badge badge-warning">性能问题</span>
                                        <span class="font-medium text-gray-800">帧率下降</span>
                                    </div>
                                    <p class="text-sm text-gray-500 mb-3">
                                        检测到 FPS 低于 30，平均值: 24fps
                                    </p>
                                    <div class="flex items-center space-x-4 text-sm text-gray-400">
                                        <span><i class="fas fa-repeat mr-1"></i>本日志出现 2 次</span>
                                    </div>
                                </div>
                                <div class="flex flex-col space-y-2 ml-4">
                                    <button onclick="event.stopPropagation(); showPage('page-pattern-analysis')" class="px-3 py-1.5 text-xs bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100">
                                        <i class="fas fa-chart-bar mr-1"></i>维度分析
                                    </button>
                                    <button onclick="event.stopPropagation(); showPage('page-pattern-analysis')" class="px-3 py-1.5 text-xs bg-gray-50 text-gray-600 rounded-lg hover:bg-gray-100">
                                        <i class="fas fa-users mr-1"></i>影响范围
                                    </button>
                                    <button onclick="event.stopPropagation(); switchLogTab(document.querySelector('.tab-btn:nth-child(2)'), 'raw')" class="px-3 py-1.5 text-xs bg-gray-50 text-gray-600 rounded-lg hover:bg-gray-100">
                                        <i class="fas fa-crosshairs mr-1"></i>定位日志
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 模式卡片3 -->
                        <div class="pattern-card p-4" onclick="showPage('page-pattern-analysis')">
                            <div class="flex items-start justify-between">
                                <div class="flex-1">
                                    <div class="flex items-center space-x-2 mb-2">
                                        <span class="badge badge-warning">性能问题</span>
                                        <span class="font-medium text-gray-800">内存警告</span>
                                    </div>
                                    <p class="text-sm text-gray-500 mb-3">
                                        检测到内存使用率较高: 85%
                                    </p>
                                    <div class="flex items-center space-x-4 text-sm text-gray-400">
                                        <span><i class="fas fa-repeat mr-1"></i>本日志出现 1 次</span>
                                    </div>
                                </div>
                                <div class="flex flex-col space-y-2 ml-4">
                                    <button onclick="event.stopPropagation(); showPage('page-pattern-analysis')" class="px-3 py-1.5 text-xs bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100">
                                        <i class="fas fa-chart-bar mr-1"></i>维度分析
                                    </button>
                                    <button onclick="event.stopPropagation(); showPage('page-pattern-analysis')" class="px-3 py-1.5 text-xs bg-gray-50 text-gray-600 rounded-lg hover:bg-gray-100">
                                        <i class="fas fa-users mr-1"></i>影响范围
                                    </button>
                                    <button onclick="event.stopPropagation(); switchLogTab(document.querySelector('.tab-btn:nth-child(2)'), 'raw')" class="px-3 py-1.5 text-xs bg-gray-50 text-gray-600 rounded-lg hover:bg-gray-100">
                                        <i class="fas fa-crosshairs mr-1"></i>定位日志
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 原始日志 Tab -->
                <div id="tab-raw" class="hidden">
                    <!-- 工具栏 -->
                    <div class="p-4 border-b border-gray-100 flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <div class="relative">
                                <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                <input type="text" placeholder="搜索日志内容..." class="pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 w-64">
                            </div>
                            <button class="px-3 py-2 text-sm bg-red-50 text-red-600 rounded-lg hover:bg-red-100">
                                <i class="fas fa-exclamation-circle mr-1"></i>跳转到问题 (3)
                            </button>
                        </div>
                        <div class="text-sm text-gray-500">
                            共 2,847 行 | <span class="text-red-500">ERROR: 2</span> | <span class="text-yellow-500">WARN: 5</span>
                        </div>
                    </div>
                    
                    <!-- 日志内容 -->
                    <div class="p-4 bg-gray-900 max-h-96 overflow-auto">
                        <div class="space-y-0.5 text-sm">
                            <div class="log-line text-gray-400 px-2 py-1 rounded">[14:32:15.123] [INFO] [GameManager] 开始加载副本场景...</div>
                            <div class="log-line text-gray-400 px-2 py-1 rounded">[14:32:15.234] [INFO] [ResourceLoader] 加载资源: dungeon_boss_01.prefab</div>
                            <div class="log-line text-gray-400 px-2 py-1 rounded">[14:32:15.456] [INFO] [ResourceLoader] 资源加载完成, 耗时: 222ms</div>
                            <div class="log-line text-gray-400 px-2 py-1 rounded">[14:32:15.567] [INFO] [SceneManager] 初始化场景对象...</div>
                            <div class="log-line text-yellow-400 px-2 py-1 rounded bg-yellow-900 bg-opacity-30 border-l-2 border-yellow-500">
                                <i class="fas fa-exclamation-triangle mr-2 text-yellow-500"></i>[14:32:15.678] [WARN] [MemoryManager] 内存使用率较高: 85%
                            </div>
                            <div class="log-line text-gray-400 px-2 py-1 rounded">[14:32:15.789] [INFO] [AIController] 初始化 BOSS AI 控制器</div>
                            <div class="log-line text-gray-400 px-2 py-1 rounded">[14:32:15.890] [INFO] [SkillManager] 加载技能配置...</div>
                            <div class="log-line text-yellow-400 px-2 py-1 rounded bg-yellow-900 bg-opacity-30 border-l-2 border-yellow-500">
                                <i class="fas fa-tachometer-alt mr-2 text-yellow-500"></i>[14:32:16.001] [WARN] [Performance] FPS 下降: 28fps
                            </div>
                            <div class="log-line text-gray-400 px-2 py-1 rounded">[14:32:16.112] [INFO] [NetworkManager] 同步场景数据...</div>
                            <div class="log-line text-red-400 px-2 py-1 rounded bg-red-900 bg-opacity-40 border-l-2 border-red-500">
                                <i class="fas fa-bug mr-2 text-red-500"></i>[14:32:16.223] [ERROR] [BossController] NullReferenceException: Object reference not set
                            </div>
                            <div class="log-line text-red-300 px-2 py-1 rounded bg-red-900 bg-opacity-20 pl-8">    at BossController.Initialize() [0x0001a] in BossController.cs:128</div>
                            <div class="log-line text-red-300 px-2 py-1 rounded bg-red-900 bg-opacity-20 pl-8">    at SceneManager.OnSceneLoaded() [0x00023] in SceneManager.cs:256</div>
                            <div class="log-line text-red-300 px-2 py-1 rounded bg-red-900 bg-opacity-20 pl-8">    at UnityEngine.SceneManagement.SceneManager.Internal_SceneLoaded()</div>
                            <div class="log-line text-red-400 px-2 py-1 rounded bg-red-900 bg-opacity-40 border-l-2 border-red-500">
                                <i class="fas fa-times-circle mr-2 text-red-500"></i>[14:32:16.334] [FATAL] [CrashHandler] 应用程序崩溃，正在收集诊断信息...
                            </div>
                            <div class="log-line text-gray-400 px-2 py-1 rounded">[14:32:16.445] [INFO] [CrashHandler] 内存快照已保存</div>
                            <div class="log-line text-gray-400 px-2 py-1 rounded">[14:32:16.556] [INFO] [CrashHandler] 日志上传中...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== 页面4: 模式分析 ==================== -->
        <div id="page-pattern-analysis" class="page">
            <!-- 面包屑 -->
            <nav class="breadcrumb flex items-center space-x-2 text-sm mb-6">
                <a href="#" onclick="showPage('page-search')"><i class="fas fa-home"></i></a>
                <span class="text-gray-400">/</span>
                <a href="#" onclick="showPage('page-user-logs')">用户 10086001</a>
                <span class="text-gray-400">/</span>
                <a href="#" onclick="showPage('page-log-detail')">日志详情</a>
                <span class="text-gray-400">/</span>
                <span class="text-gray-800 font-medium">模式分析</span>
            </nav>
            
            <!-- 顶部信息栏 -->
            <div class="card p-4 mb-6">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <span class="badge badge-error">异常</span>
                        <h2 class="text-xl font-bold text-gray-800">NullReferenceException</h2>
                    </div>
                    <button onclick="showPage('page-log-detail')" class="px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">
                        <i class="fas fa-arrow-left mr-1"></i>返回日志
                    </button>
                </div>
                <p class="text-gray-500 text-sm mt-2 font-mono">
                    at BossController.Initialize() [0x0001a] in BossController.cs:128
                </p>
            </div>
            
            <!-- Tab切换 -->
            <div class="card overflow-hidden">
                <div class="flex border-b border-gray-200">
                    <button class="tab-btn active" onclick="switchPatternTab(this, 'scope')">
                        <i class="fas fa-chart-line mr-2"></i>影响范围
                    </button>
                    <button class="tab-btn" onclick="switchPatternTab(this, 'dimension')">
                        <i class="fas fa-chart-bar mr-2"></i>维度分析
                    </button>
                    <button class="tab-btn" onclick="switchPatternTab(this, 'samples')">
                        <i class="fas fa-file-alt mr-2"></i>样本日志
                    </button>
                    <button class="tab-btn" onclick="switchPatternTab(this, 'experience')">
                        <i class="fas fa-lightbulb mr-2"></i>处理经验
                        <span class="ml-1 px-1.5 py-0.5 bg-blue-100 text-blue-600 text-xs rounded-full">3</span>
                    </button>
                </div>
                
                <!-- 影响范围 Tab -->
                <div id="pattern-tab-scope" class="p-6">
                    <!-- 时间选择 -->
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="font-semibold text-gray-800">影响范围统计</h3>
                        <select class="px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option>最近24小时</option>
                            <option selected>最近7天</option>
                            <option>最近30天</option>
                        </select>
                    </div>
                    
                    <!-- 统计卡片 -->
                    <div class="grid grid-cols-4 gap-4 mb-8">
                        <div class="stat-card rounded-xl p-4 text-white">
                            <p class="text-white text-opacity-80 text-sm">影响用户数</p>
                            <p class="text-3xl font-bold mt-1">2,341</p>
                            <p class="text-sm text-white text-opacity-70 mt-2">
                                <i class="fas fa-arrow-up mr-1"></i>较上周 +15%
                            </p>
                        </div>
                        <div class="stat-card orange rounded-xl p-4 text-white">
                            <p class="text-white text-opacity-80 text-sm">出现次数</p>
                            <p class="text-3xl font-bold mt-1">5,672</p>
                            <p class="text-sm text-white text-opacity-70 mt-2">
                                <i class="fas fa-arrow-up mr-1"></i>较上周 +23%
                            </p>
                        </div>
                        <div class="stat-card green rounded-xl p-4 text-white">
                            <p class="text-white text-opacity-80 text-sm">首次出现</p>
                            <p class="text-xl font-bold mt-1">2026-01-13</p>
                            <p class="text-sm text-white text-opacity-70 mt-2">2天前</p>
                        </div>
                        <div class="stat-card purple rounded-xl p-4 text-white">
                            <p class="text-white text-opacity-80 text-sm">最近出现</p>
                            <p class="text-xl font-bold mt-1">2026-01-15</p>
                            <p class="text-sm text-white text-opacity-70 mt-2">5分钟前</p>
                        </div>
                    </div>
                    
                    <!-- 趋势图 -->
                    <div class="border border-gray-200 rounded-xl p-4">
                        <h4 class="font-medium text-gray-800 mb-4">问题出现趋势</h4>
                        <div class="h-48 flex items-end space-x-2">
                            <div class="flex-1 flex flex-col items-center">
                                <div class="w-full bg-blue-200 rounded-t" style="height: 40%"></div>
                                <span class="text-xs text-gray-400 mt-2">01-09</span>
                            </div>
                            <div class="flex-1 flex flex-col items-center">
                                <div class="w-full bg-blue-200 rounded-t" style="height: 35%"></div>
                                <span class="text-xs text-gray-400 mt-2">01-10</span>
                            </div>
                            <div class="flex-1 flex flex-col items-center">
                                <div class="w-full bg-blue-200 rounded-t" style="height: 50%"></div>
                                <span class="text-xs text-gray-400 mt-2">01-11</span>
                            </div>
                            <div class="flex-1 flex flex-col items-center">
                                <div class="w-full bg-blue-200 rounded-t" style="height: 45%"></div>
                                <span class="text-xs text-gray-400 mt-2">01-12</span>
                            </div>
                            <div class="flex-1 flex flex-col items-center">
                                <div class="w-full bg-blue-300 rounded-t" style="height: 65%"></div>
                                <span class="text-xs text-gray-400 mt-2">01-13</span>
                            </div>
                            <div class="flex-1 flex flex-col items-center">
                                <div class="w-full bg-blue-400 rounded-t" style="height: 80%"></div>
                                <span class="text-xs text-gray-400 mt-2">01-14</span>
                            </div>
                            <div class="flex-1 flex flex-col items-center">
                                <div class="w-full bg-blue-500 rounded-t" style="height: 100%"></div>
                                <span class="text-xs text-gray-400 mt-2">01-15</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 维度分析 Tab -->
                <div id="pattern-tab-dimension" class="p-6 hidden">
                    <h3 class="font-semibold text-gray-800 mb-6">多维度分布分析</h3>
                    
                    <div class="grid grid-cols-2 gap-6">
                        <!-- App版本分布 -->
                        <div class="border border-gray-200 rounded-xl p-4">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="font-medium text-gray-800">
                                    <i class="fas fa-code-branch mr-2 text-blue-500"></i>App版本分布
                                </h4>
                                <span class="text-xs text-gray-400">Top 5</span>
                            </div>
                            <div class="space-y-3">
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span class="text-gray-700">v3.2.1</span>
                                        <span class="font-medium text-red-500">78% (1,826人)</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-bar-fill bg-red-500" style="width: 78%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span class="text-gray-700">v3.2.0</span>
                                        <span class="font-medium">15% (351人)</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-bar-fill bg-blue-400" style="width: 15%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span class="text-gray-700">v3.1.9</span>
                                        <span class="font-medium">5% (117人)</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-bar-fill bg-blue-300" style="width: 5%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span class="text-gray-700">v3.2.2 (灰度)</span>
                                        <span class="font-medium">2% (47人)</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-bar-fill bg-blue-200" style="width: 2%"></div>
                                    </div>
                                </div>
                            </div>
                            <p class="text-xs text-red-500 mt-3 flex items-center">
                                <i class="fas fa-exclamation-triangle mr-1"></i>
                                问题集中在 v3.2.1，建议优先排查该版本
                            </p>
                        </div>
                        
                        <!-- 设备型号分布 -->
                        <div class="border border-gray-200 rounded-xl p-4">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="font-medium text-gray-800">
                                    <i class="fas fa-mobile-alt mr-2 text-purple-500"></i>设备型号分布
                                </h4>
                                <span class="text-xs text-gray-400">Top 5</span>
                            </div>
                            <div class="space-y-3">
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span class="text-gray-700">iPhone 15 Pro</span>
                                        <span class="font-medium">25% (585人)</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-bar-fill bg-purple-500" style="width: 25%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span class="text-gray-700">iPhone 14 Pro</span>
                                        <span class="font-medium">20% (468人)</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-bar-fill bg-purple-400" style="width: 20%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span class="text-gray-700">Samsung S24</span>
                                        <span class="font-medium">18% (421人)</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-bar-fill bg-purple-400" style="width: 18%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span class="text-gray-700">Xiaomi 14</span>
                                        <span class="font-medium">12% (281人)</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-bar-fill bg-purple-300" style="width: 12%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span class="text-gray-700">其他</span>
                                        <span class="font-medium">25% (586人)</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-bar-fill bg-gray-300" style="width: 25%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 操作系统分布 -->
                        <div class="border border-gray-200 rounded-xl p-4">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="font-medium text-gray-800">
                                    <i class="fas fa-laptop mr-2 text-green-500"></i>操作系统分布
                                </h4>
                                <span class="text-xs text-gray-400">Top 5</span>
                            </div>
                            <div class="space-y-3">
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span class="text-gray-700">iOS 17.x</span>
                                        <span class="font-medium text-yellow-600">62% (1,451人)</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-bar-fill bg-yellow-500" style="width: 62%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span class="text-gray-700">Android 14</span>
                                        <span class="font-medium">25% (585人)</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-bar-fill bg-green-400" style="width: 25%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span class="text-gray-700">iOS 16.x</span>
                                        <span class="font-medium">8% (187人)</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-bar-fill bg-green-300" style="width: 8%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span class="text-gray-700">Android 13</span>
                                        <span class="font-medium">5% (118人)</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-bar-fill bg-green-200" style="width: 5%"></div>
                                    </div>
                                </div>
                            </div>
                            <p class="text-xs text-yellow-600 mt-3 flex items-center">
                                <i class="fas fa-info-circle mr-1"></i>
                                iOS 17 用户占比较高，需关注兼容性
                            </p>
                        </div>
                        
                        <!-- 网络类型分布 -->
                        <div class="border border-gray-200 rounded-xl p-4">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="font-medium text-gray-800">
                                    <i class="fas fa-wifi mr-2 text-cyan-500"></i>网络类型分布
                                </h4>
                            </div>
                            <div class="space-y-3">
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span class="text-gray-700">WiFi</span>
                                        <span class="font-medium">68% (1,592人)</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-bar-fill bg-cyan-500" style="width: 68%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span class="text-gray-700">5G</span>
                                        <span class="font-medium">22% (515人)</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-bar-fill bg-cyan-400" style="width: 22%"></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span class="text-gray-700">4G</span>
                                        <span class="font-medium">10% (234人)</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-bar-fill bg-cyan-300" style="width: 10%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 渠道分布 -->
                        <div class="border border-gray-200 rounded-xl p-4 col-span-2">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="font-medium text-gray-800">
                                    <i class="fas fa-store mr-2 text-orange-500"></i>渠道分布
                                </h4>
                                <span class="text-xs text-gray-400">Top 5</span>
                            </div>
                            <div class="grid grid-cols-5 gap-4">
                                <div class="text-center p-3 bg-orange-50 rounded-lg">
                                    <p class="text-2xl font-bold text-orange-600">35%</p>
                                    <p class="text-sm text-gray-600">App Store</p>
                                    <p class="text-xs text-gray-400">819人</p>
                                </div>
                                <div class="text-center p-3 bg-gray-50 rounded-lg">
                                    <p class="text-2xl font-bold text-gray-600">28%</p>
                                    <p class="text-sm text-gray-600">Google Play</p>
                                    <p class="text-xs text-gray-400">655人</p>
                                </div>
                                <div class="text-center p-3 bg-gray-50 rounded-lg">
                                    <p class="text-2xl font-bold text-gray-600">18%</p>
                                    <p class="text-sm text-gray-600">华为应用市场</p>
                                    <p class="text-xs text-gray-400">421人</p>
                                </div>
                                <div class="text-center p-3 bg-gray-50 rounded-lg">
                                    <p class="text-2xl font-bold text-gray-600">12%</p>
                                    <p class="text-sm text-gray-600">小米应用商店</p>
                                    <p class="text-xs text-gray-400">281人</p>
                                </div>
                                <div class="text-center p-3 bg-gray-50 rounded-lg">
                                    <p class="text-2xl font-bold text-gray-600">7%</p>
                                    <p class="text-sm text-gray-600">其他</p>
                                    <p class="text-xs text-gray-400">165人</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 样本日志 Tab -->
                <div id="pattern-tab-samples" class="p-6 hidden">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="font-semibold text-gray-800">其他用户的同类问题日志</h3>
                        <span class="text-sm text-gray-500">共 2,341 个用户遇到此问题</span>
                    </div>
                    
                    <div class="border border-gray-200 rounded-xl overflow-hidden">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">用户ID</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">上报时间</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">设备型号</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">App版本</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">操作</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100">
                                <tr class="hover:bg-gray-50">
                                    <td class="px-4 py-3 font-medium text-blue-600">10086001</td>
                                    <td class="px-4 py-3 text-gray-600">2026-01-15 14:32:18</td>
                                    <td class="px-4 py-3 text-gray-600">iPhone 15 Pro Max</td>
                                    <td class="px-4 py-3"><span class="badge badge-info">v3.2.1</span></td>
                                    <td class="px-4 py-3">
                                        <button onclick="showPage('page-log-detail')" class="text-blue-500 hover:underline text-sm">查看</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-4 py-3 font-medium text-blue-600">10089234</td>
                                    <td class="px-4 py-3 text-gray-600">2026-01-15 14:28:45</td>
                                    <td class="px-4 py-3 text-gray-600">iPhone 14 Pro</td>
                                    <td class="px-4 py-3"><span class="badge badge-info">v3.2.1</span></td>
                                    <td class="px-4 py-3">
                                        <button class="text-blue-500 hover:underline text-sm">查看</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-4 py-3 font-medium text-blue-600">10087651</td>
                                    <td class="px-4 py-3 text-gray-600">2026-01-15 14:15:22</td>
                                    <td class="px-4 py-3 text-gray-600">Samsung S24 Ultra</td>
                                    <td class="px-4 py-3"><span class="badge badge-info">v3.2.1</span></td>
                                    <td class="px-4 py-3">
                                        <button class="text-blue-500 hover:underline text-sm">查看</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-4 py-3 font-medium text-blue-600">10092847</td>
                                    <td class="px-4 py-3 text-gray-600">2026-01-15 13:58:11</td>
                                    <td class="px-4 py-3 text-gray-600">Xiaomi 14</td>
                                    <td class="px-4 py-3"><span class="badge badge-info">v3.2.1</span></td>
                                    <td class="px-4 py-3">
                                        <button class="text-blue-500 hover:underline text-sm">查看</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-4 py-3 font-medium text-blue-600">10085123</td>
                                    <td class="px-4 py-3 text-gray-600">2026-01-15 13:42:38</td>
                                    <td class="px-4 py-3 text-gray-600">iPhone 13</td>
                                    <td class="px-4 py-3"><span class="badge badge-gray">v3.2.0</span></td>
                                    <td class="px-4 py-3">
                                        <button class="text-blue-500 hover:underline text-sm">查看</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- 分页 -->
                    <div class="flex items-center justify-between mt-4">
                        <p class="text-sm text-gray-500">显示 1-5 条，共 2,341 条</p>
                        <div class="flex items-center space-x-2">
                            <button class="px-3 py-1.5 border border-gray-300 rounded-lg text-sm hover:bg-gray-50 disabled:opacity-50" disabled>上一页</button>
                            <button class="px-3 py-1.5 bg-blue-500 text-white rounded-lg text-sm">1</button>
                            <button class="px-3 py-1.5 border border-gray-300 rounded-lg text-sm hover:bg-gray-50">2</button>
                            <button class="px-3 py-1.5 border border-gray-300 rounded-lg text-sm hover:bg-gray-50">3</button>
                            <span class="text-gray-400">...</span>
                            <button class="px-3 py-1.5 border border-gray-300 rounded-lg text-sm hover:bg-gray-50">469</button>
                            <button class="px-3 py-1.5 border border-gray-300 rounded-lg text-sm hover:bg-gray-50">下一页</button>
                        </div>
                    </div>
                </div>
                
                <!-- 处理经验 Tab -->
                <div id="pattern-tab-experience" class="p-6 hidden">
                    <div class="flex items-center justify-between mb-6">
                        <div>
                            <h3 class="font-semibold text-gray-800">处理经验</h3>
                            <p class="text-sm text-gray-500 mt-1">团队成员在处理此问题时积累的经验和解决方案</p>
                        </div>
                        <button onclick="openExperienceModal('add')" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition">
                            <i class="fas fa-plus mr-2"></i>添加处理经验
                        </button>
                    </div>
                    
                    <!-- 最新处理经验（置顶） -->
                    <div class="mb-6 p-4 bg-blue-50 border border-blue-200 rounded-xl">
                        <div class="flex items-start justify-between">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center">
                                    <span class="text-white font-medium">张</span>
                                </div>
                                <div>
                                    <div class="flex items-center space-x-2">
                                        <span class="font-medium text-gray-800">张三</span>
                                        <span class="badge badge-info text-xs">客户端开发</span>
                                        <span class="badge badge-success text-xs"><i class="fas fa-thumbtack mr-1"></i>置顶</span>
                                    </div>
                                    <p class="text-xs text-gray-500">2026-01-15 10:30 更新</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-2">
                                <button onclick="openExperienceModal('edit')" class="text-gray-400 hover:text-blue-500" title="编辑">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="text-gray-400 hover:text-yellow-500" title="取消置顶">
                                    <i class="fas fa-thumbtack"></i>
                                </button>
                            </div>
                        </div>
                        <div class="mt-4">
                            <h4 class="font-medium text-gray-800 mb-2">问题根因分析</h4>
                            <p class="text-gray-600 text-sm leading-relaxed">
                                此问题是由于 BossController 在初始化时，bossConfig 未正确加载导致的空引用异常。
                                主要发生在副本加载过程中，当网络延迟较高时，配置文件未能及时下载完成就开始初始化。
                            </p>
                            <h4 class="font-medium text-gray-800 mb-2 mt-4">解决方案</h4>
                            <div class="text-gray-600 text-sm leading-relaxed">
                                <ol class="list-decimal list-inside space-y-1">
                                    <li>在 BossController.Initialize() 方法中增加 null 检查</li>
                                    <li>添加配置加载完成的回调机制，确保配置加载完成后再初始化</li>
                                    <li>增加配置加载超时处理，超时后使用默认配置</li>
                                </ol>
                            </div>
                            <h4 class="font-medium text-gray-800 mb-2 mt-4">修复版本</h4>
                            <p class="text-gray-600 text-sm">
                                <span class="badge badge-success">v3.2.2</span> 预计 2026-01-18 发布
                            </p>
                        </div>
                        <div class="flex items-center space-x-4 mt-4 pt-4 border-t border-blue-200">
                            <button class="text-sm text-gray-500 hover:text-blue-500">
                                <i class="fas fa-thumbs-up mr-1"></i>有帮助 (12)
                            </button>
                            <button class="text-sm text-gray-500 hover:text-blue-500">
                                <i class="fas fa-comment mr-1"></i>评论 (3)
                            </button>
                            <button class="text-sm text-gray-500 hover:text-blue-500">
                                <i class="fas fa-share-alt mr-1"></i>分享
                            </button>
                        </div>
                    </div>
                    
                    <!-- 历史处理经验列表 -->
                    <div class="mb-4">
                        <h4 class="font-medium text-gray-700 mb-3">
                            <i class="fas fa-history mr-2 text-gray-400"></i>历史处理记录
                        </h4>
                    </div>
                    
                    <div class="space-y-4">
                        <!-- 历史记录1 -->
                        <div class="p-4 border border-gray-200 rounded-xl hover:border-gray-300 transition">
                            <div class="flex items-start justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center">
                                        <span class="text-white font-medium">李</span>
                                    </div>
                                    <div>
                                        <div class="flex items-center space-x-2">
                                            <span class="font-medium text-gray-800">李四</span>
                                            <span class="badge badge-gray text-xs">QA工程师</span>
                                        </div>
                                        <p class="text-xs text-gray-500">2026-01-14 16:45</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <button onclick="openExperienceModal('view')" class="text-gray-400 hover:text-blue-500" title="查看详情">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="text-gray-400 hover:text-yellow-500" title="置顶">
                                        <i class="far fa-thumbtack"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="mt-3">
                                <p class="text-gray-600 text-sm line-clamp-2">
                                    复现条件：在弱网环境下（延迟 > 500ms）进入副本，约有 30% 概率触发。
                                    建议在网络状态监控模块中增加对配置加载超时的预警...
                                </p>
                            </div>
                            <div class="flex items-center space-x-4 mt-3">
                                <span class="text-sm text-gray-400">
                                    <i class="fas fa-thumbs-up mr-1"></i>有帮助 (5)
                                </span>
                                <span class="text-sm text-gray-400">
                                    <i class="fas fa-comment mr-1"></i>评论 (1)
                                </span>
                            </div>
                        </div>
                        
                        <!-- 历史记录2 -->
                        <div class="p-4 border border-gray-200 rounded-xl hover:border-gray-300 transition">
                            <div class="flex items-start justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center">
                                        <span class="text-white font-medium">王</span>
                                    </div>
                                    <div>
                                        <div class="flex items-center space-x-2">
                                            <span class="font-medium text-gray-800">王五</span>
                                            <span class="badge badge-gray text-xs">客户端开发</span>
                                        </div>
                                        <p class="text-xs text-gray-500">2026-01-13 11:20</p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <button onclick="openExperienceModal('view')" class="text-gray-400 hover:text-blue-500" title="查看详情">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="text-gray-400 hover:text-yellow-500" title="置顶">
                                        <i class="far fa-thumbtack"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="mt-3">
                                <p class="text-gray-600 text-sm line-clamp-2">
                                    初步排查：问题出现在 BossController.cs 第 128 行，怀疑是配置文件加载时序问题。
                                    已提交 hotfix 分支进行修复测试...
                                </p>
                            </div>
                            <div class="flex items-center space-x-4 mt-3">
                                <span class="text-sm text-gray-400">
                                    <i class="fas fa-thumbs-up mr-1"></i>有帮助 (8)
                                </span>
                                <span class="text-sm text-gray-400">
                                    <i class="fas fa-comment mr-1"></i>评论 (2)
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 加载更多 -->
                    <div class="text-center mt-6">
                        <button class="px-4 py-2 border border-gray-300 rounded-lg text-sm text-gray-600 hover:bg-gray-50">
                            <i class="fas fa-chevron-down mr-2"></i>加载更多历史记录
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 处理经验弹窗 -->
        <div id="experience-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center">
            <div class="bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden shadow-2xl">
                <!-- 弹窗头部 -->
                <div class="p-4 border-b border-gray-200 flex items-center justify-between">
                    <h3 id="modal-title" class="text-lg font-semibold text-gray-800">添加处理经验</h3>
                    <button onclick="closeExperienceModal()" class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100">
                        <i class="fas fa-times text-gray-400"></i>
                    </button>
                </div>
                
                <!-- 弹窗内容 -->
                <div class="p-6 overflow-y-auto max-h-[calc(90vh-140px)]">
                    <!-- 编辑模式 -->
                    <div id="modal-edit-mode">
                        <div class="space-y-4">
                            <!-- 经验类型 -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">经验类型</label>
                                <div class="flex space-x-3">
                                    <label class="flex items-center">
                                        <input type="radio" name="exp-type" value="analysis" checked class="mr-2">
                                        <span class="text-sm">问题分析</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="radio" name="exp-type" value="solution" class="mr-2">
                                        <span class="text-sm">解决方案</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="radio" name="exp-type" value="workaround" class="mr-2">
                                        <span class="text-sm">临时方案</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="radio" name="exp-type" value="reproduce" class="mr-2">
                                        <span class="text-sm">复现步骤</span>
                                    </label>
                                </div>
                            </div>
                            
                            <!-- 标题 -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">标题</label>
                                <input type="text" placeholder="简要描述您的处理经验..." 
                                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                            
                            <!-- 详细内容 -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">详细内容</label>
                                <textarea rows="8" placeholder="请详细描述问题的根因分析、解决方案、复现步骤等信息..." 
                                          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"></textarea>
                                <p class="text-xs text-gray-400 mt-1">支持 Markdown 格式</p>
                            </div>
                            
                            <!-- 关联版本 -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">关联版本</label>
                                <div class="flex space-x-3">
                                    <select class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <option value="">问题出现版本</option>
                                        <option>v3.2.1</option>
                                        <option>v3.2.0</option>
                                        <option>v3.1.9</option>
                                    </select>
                                    <select class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <option value="">修复版本（可选）</option>
                                        <option>v3.2.2（开发中）</option>
                                        <option>v3.2.3（规划中）</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- 附件 -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">附件（可选）</label>
                                <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-400 transition cursor-pointer">
                                    <i class="fas fa-cloud-upload-alt text-3xl text-gray-400 mb-2"></i>
                                    <p class="text-sm text-gray-500">点击或拖拽上传截图、日志文件等</p>
                                    <p class="text-xs text-gray-400 mt-1">支持 PNG、JPG、PDF、TXT 格式，最大 10MB</p>
                                </div>
                            </div>
                            
                            <!-- 设置 -->
                            <div class="flex items-center space-x-6">
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-2">
                                    <span class="text-sm text-gray-600">置顶此经验</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-2">
                                    <span class="text-sm text-gray-600">通知相关开发人员</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 查看模式 -->
                    <div id="modal-view-mode" class="hidden">
                        <div class="flex items-center space-x-3 mb-4">
                            <div class="w-12 h-12 bg-purple-500 rounded-full flex items-center justify-center">
                                <span class="text-white font-medium text-lg">李</span>
                            </div>
                            <div>
                                <div class="flex items-center space-x-2">
                                    <span class="font-medium text-gray-800">李四</span>
                                    <span class="badge badge-gray text-xs">QA工程师</span>
                                </div>
                                <p class="text-sm text-gray-500">2026-01-14 16:45 发布</p>
                            </div>
                        </div>
                        
                        <div class="prose max-w-none">
                            <h4 class="text-lg font-semibold text-gray-800 mb-3">复现条件与排查建议</h4>
                            <div class="text-gray-600 space-y-4">
                                <p><strong>复现条件：</strong></p>
                                <ul class="list-disc list-inside space-y-1 ml-4">
                                    <li>在弱网环境下（延迟 > 500ms）进入副本</li>
                                    <li>约有 30% 概率触发此问题</li>
                                    <li>主要影响 iOS 17.x 用户</li>
                                </ul>
                                
                                <p><strong>排查建议：</strong></p>
                                <ol class="list-decimal list-inside space-y-1 ml-4">
                                    <li>检查 NetworkManager 中的配置加载逻辑</li>
                                    <li>添加网络状态监控模块对配置加载超时的预警</li>
                                    <li>考虑在本地缓存一份默认配置作为 fallback</li>
                                </ol>
                                
                                <p><strong>相关代码：</strong></p>
                                <pre class="bg-gray-900 text-gray-100 p-4 rounded-lg text-sm overflow-x-auto">// BossController.cs:128
if (bossConfig == null) {
    Debug.LogError("Boss config not loaded");
    return; // 这里应该有 fallback 逻辑
}</pre>
                            </div>
                        </div>
                        
                        <div class="flex items-center space-x-4 mt-6 pt-4 border-t border-gray-200">
                            <button class="text-sm text-gray-500 hover:text-blue-500">
                                <i class="fas fa-thumbs-up mr-1"></i>有帮助 (5)
                            </button>
                            <button class="text-sm text-gray-500 hover:text-blue-500">
                                <i class="fas fa-comment mr-1"></i>评论 (1)
                            </button>
                            <button class="text-sm text-gray-500 hover:text-blue-500">
                                <i class="fas fa-share-alt mr-1"></i>分享
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- 弹窗底部 -->
                <div id="modal-footer-edit" class="p-4 border-t border-gray-200 flex items-center justify-end space-x-3">
                    <button onclick="closeExperienceModal()" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50">
                        取消
                    </button>
                    <button onclick="saveExperience()" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                        <i class="fas fa-check mr-2"></i>保存经验
                    </button>
                </div>
                <div id="modal-footer-view" class="p-4 border-t border-gray-200 flex items-center justify-end space-x-3 hidden">
                    <button onclick="closeExperienceModal()" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50">
                        关闭
                    </button>
                    <button onclick="openExperienceModal('edit')" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                        <i class="fas fa-edit mr-2"></i>编辑
                    </button>
                </div>
            </div>
        </div>

        <!-- ==================== 页面5: 日志模式总览 ==================== -->
        <div id="page-patterns" class="page">
            <!-- 面包屑 -->
            <nav class="breadcrumb flex items-center space-x-2 text-sm mb-6">
                <a href="#" onclick="showPage('page-search')"><i class="fas fa-home"></i></a>
                <span class="text-gray-400">/</span>
                <span class="text-gray-800 font-medium">日志模式</span>
            </nav>
            
            <!-- 统计概览 -->
            <div class="grid grid-cols-4 gap-4 mb-6">
                <div class="stat-card rounded-xl p-4 text-white" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);">
                    <p class="text-white text-opacity-80 text-sm">活跃问题模式</p>
                    <p class="text-3xl font-bold mt-1">23</p>
                    <p class="text-sm text-white text-opacity-70 mt-2">较昨日 +3</p>
                </div>
                <div class="stat-card orange rounded-xl p-4 text-white">
                    <p class="text-white text-opacity-80 text-sm">影响用户总数</p>
                    <p class="text-3xl font-bold mt-1">8,432</p>
                    <p class="text-sm text-white text-opacity-70 mt-2">最近7天</p>
                </div>
                <div class="stat-card rounded-xl p-4 text-white">
                    <p class="text-white text-opacity-80 text-sm">今日上报</p>
                    <p class="text-3xl font-bold mt-1">1,256</p>
                    <p class="text-sm text-white text-opacity-70 mt-2">较昨日 +12%</p>
                </div>
                <div class="stat-card green rounded-xl p-4 text-white">
                    <p class="text-white text-opacity-80 text-sm">已解决</p>
                    <p class="text-3xl font-bold mt-1">15</p>
                    <p class="text-sm text-white text-opacity-70 mt-2">本周解决</p>
                </div>
            </div>
            
            <!-- 筛选和排序 -->
            <div class="card p-4 mb-6">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <span class="text-sm text-gray-500">类型筛选：</span>
                        <button class="px-3 py-1.5 text-sm bg-gray-800 text-white rounded-lg">全部</button>
                        <button class="px-3 py-1.5 text-sm border border-gray-300 text-gray-600 rounded-lg hover:bg-gray-50">异常</button>
                        <button class="px-3 py-1.5 text-sm border border-gray-300 text-gray-600 rounded-lg hover:bg-gray-50">性能</button>
                        <button class="px-3 py-1.5 text-sm border border-gray-300 text-gray-600 rounded-lg hover:bg-gray-50">网络</button>
                        <button class="px-3 py-1.5 text-sm border border-gray-300 text-gray-600 rounded-lg hover:bg-gray-50">内存</button>
                    </div>
                    <div class="flex items-center space-x-3">
                        <select class="px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option>最近7天</option>
                            <option>最近24小时</option>
                            <option>最近30天</option>
                        </select>
                        <select class="px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option>按影响用户数排序</option>
                            <option>按出现次数排序</option>
                            <option>按趋势排序</option>
                            <option>按首次出现时间</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <!-- 问题模式列表 -->
            <div class="space-y-4">
                <!-- 模式1: NullReferenceException -->
                <div class="card overflow-hidden">
                    <div class="p-4 cursor-pointer hover:bg-gray-50" onclick="togglePatternDetail('pattern-1')">
                        <div class="flex items-start justify-between">
                            <div class="flex-1">
                                <div class="flex items-center space-x-3 mb-2">
                                    <span class="badge badge-error">异常</span>
                                    <span class="badge badge-warning"><i class="fas fa-arrow-up mr-1"></i>上升中</span>
                                    <span class="text-xs text-gray-400">#PATTERN-1024</span>
                                </div>
                                <h3 class="font-semibold text-gray-800 text-lg">NullReferenceException</h3>
                                <p class="text-sm text-gray-500 font-mono mt-1">at BossController.Initialize() in BossController.cs:128</p>
                                <div class="flex items-center space-x-6 mt-3 text-sm text-gray-500">
                                    <span><i class="fas fa-users mr-1"></i>影响 <strong class="text-gray-800">2,341</strong> 用户</span>
                                    <span><i class="fas fa-repeat mr-1"></i>出现 <strong class="text-gray-800">5,672</strong> 次</span>
                                    <span><i class="fas fa-clock mr-1"></i>首次: 2天前</span>
                                    <span><i class="fas fa-history mr-1"></i>最近: 5分钟前</span>
                                </div>
                            </div>
                            <div class="flex items-center space-x-4">
                                <div class="text-right">
                                    <p class="text-2xl font-bold text-red-500">+45%</p>
                                    <p class="text-xs text-gray-400">较昨日</p>
                                </div>
                                <i class="fas fa-chevron-down text-gray-400 transition-transform" id="pattern-1-icon"></i>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 展开的维度分析 -->
                    <div id="pattern-1-detail" class="hidden border-t border-gray-100 bg-gray-50 p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="font-semibold text-gray-800">维度分析</h4>
                            <button onclick="showPage('page-pattern-analysis')" class="text-sm text-blue-500 hover:underline">
                                查看详情 <i class="fas fa-arrow-right ml-1"></i>
                            </button>
                        </div>
                        
                        <div class="grid grid-cols-4 gap-4">
                            <!-- 版本分布 -->
                            <div class="bg-white rounded-lg p-4 border border-gray-200">
                                <h5 class="text-sm font-medium text-gray-700 mb-3">
                                    <i class="fas fa-code-branch mr-1 text-blue-500"></i>版本分布
                                </h5>
                                <div class="space-y-2">
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">v3.2.1</span>
                                        <span class="font-medium text-red-500">78%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-red-500" style="width: 78%"></div>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">v3.2.0</span>
                                        <span class="font-medium">15%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-blue-400" style="width: 15%"></div>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">其他</span>
                                        <span class="font-medium">7%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-gray-300" style="width: 7%"></div>
                                    </div>
                                </div>
                                <p class="text-xs text-red-500 mt-2"><i class="fas fa-exclamation-triangle mr-1"></i>集中在v3.2.1</p>
                            </div>
                            
                            <!-- 设备分布 -->
                            <div class="bg-white rounded-lg p-4 border border-gray-200">
                                <h5 class="text-sm font-medium text-gray-700 mb-3">
                                    <i class="fas fa-mobile-alt mr-1 text-purple-500"></i>设备分布
                                </h5>
                                <div class="space-y-2">
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">iPhone 15 Pro</span>
                                        <span class="font-medium">25%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-purple-500" style="width: 25%"></div>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">iPhone 14 Pro</span>
                                        <span class="font-medium">20%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-purple-400" style="width: 20%"></div>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">Samsung S24</span>
                                        <span class="font-medium">18%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-purple-300" style="width: 18%"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 系统分布 -->
                            <div class="bg-white rounded-lg p-4 border border-gray-200">
                                <h5 class="text-sm font-medium text-gray-700 mb-3">
                                    <i class="fas fa-laptop mr-1 text-green-500"></i>系统分布
                                </h5>
                                <div class="space-y-2">
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">iOS 17.x</span>
                                        <span class="font-medium">62%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-green-500" style="width: 62%"></div>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">Android 14</span>
                                        <span class="font-medium">25%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-green-400" style="width: 25%"></div>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">其他</span>
                                        <span class="font-medium">13%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-gray-300" style="width: 13%"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 影响用户列表 -->
                            <div class="bg-white rounded-lg p-4 border border-gray-200">
                                <h5 class="text-sm font-medium text-gray-700 mb-3">
                                    <i class="fas fa-users mr-1 text-orange-500"></i>影响用户 (2,341)
                                </h5>
                                <div class="space-y-2 text-sm">
                                    <div class="flex items-center justify-between">
                                        <span class="text-blue-600">10086001</span>
                                        <span class="text-gray-400">5分钟前</span>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-blue-600">10089234</span>
                                        <span class="text-gray-400">12分钟前</span>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-blue-600">10087651</span>
                                        <span class="text-gray-400">18分钟前</span>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-blue-600">10092847</span>
                                        <span class="text-gray-400">25分钟前</span>
                                    </div>
                                </div>
                                <button onclick="showPage('page-pattern-analysis'); setTimeout(() => switchPatternTab(document.querySelector('#page-pattern-analysis .tab-btn:nth-child(3)'), 'samples'), 100)" class="text-xs text-blue-500 hover:underline mt-2 block">
                                    查看全部用户 →
                                </button>
                            </div>
                        </div>
                        
                        <!-- 处理经验摘要 -->
                        <div class="mt-4 pt-4 border-t border-gray-200">
                            <div class="flex items-center justify-between mb-3">
                                <h5 class="text-sm font-medium text-gray-700">
                                    <i class="fas fa-lightbulb mr-1 text-yellow-500"></i>处理经验
                                    <span class="ml-1 px-1.5 py-0.5 bg-blue-100 text-blue-600 text-xs rounded-full">3</span>
                                </h5>
                                <div class="flex items-center space-x-2">
                                    <button onclick="event.stopPropagation(); openExperienceModal('add')" class="text-xs text-blue-500 hover:underline">
                                        <i class="fas fa-plus mr-1"></i>添加经验
                                    </button>
                                    <span class="text-gray-300">|</span>
                                    <button onclick="event.stopPropagation(); showPage('page-pattern-analysis'); setTimeout(() => switchPatternTab(document.querySelector('#page-pattern-analysis .tab-btn:nth-child(4)'), 'experience'), 100)" class="text-xs text-blue-500 hover:underline">
                                        查看全部 →
                                    </button>
                                </div>
                            </div>
                            <div class="bg-white rounded-lg p-3 border border-gray-200">
                                <div class="flex items-start space-x-3">
                                    <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0">
                                        <span class="text-white text-sm font-medium">张</span>
                                    </div>
                                    <div class="flex-1 min-w-0">
                                        <div class="flex items-center space-x-2 mb-1">
                                            <span class="text-sm font-medium text-gray-800">问题根因分析</span>
                                            <span class="badge badge-success text-xs px-1.5 py-0.5">置顶</span>
                                        </div>
                                        <p class="text-xs text-gray-500 line-clamp-2">
                                            此问题是由于 BossController 在初始化时，bossConfig 未正确加载导致的空引用异常。
                                            主要发生在副本加载过程中，当网络延迟较高时...
                                        </p>
                                        <div class="flex items-center space-x-3 mt-2 text-xs text-gray-400">
                                            <span>张三 · 2小时前</span>
                                            <span><i class="fas fa-thumbs-up mr-1"></i>12</span>
                                            <span>修复版本: v3.2.2</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 模式2: 帧率下降 -->
                <div class="card overflow-hidden">
                    <div class="p-4 cursor-pointer hover:bg-gray-50" onclick="togglePatternDetail('pattern-2')">
                        <div class="flex items-start justify-between">
                            <div class="flex-1">
                                <div class="flex items-center space-x-3 mb-2">
                                    <span class="badge badge-warning">性能</span>
                                    <span class="badge badge-success"><i class="fas fa-arrow-down mr-1"></i>下降中</span>
                                    <span class="text-xs text-gray-400">#PATTERN-1023</span>
                                </div>
                                <h3 class="font-semibold text-gray-800 text-lg">帧率下降</h3>
                                <p class="text-sm text-gray-500 mt-1">检测到 FPS 低于 30，主要发生在战斗场景</p>
                                <div class="flex items-center space-x-6 mt-3 text-sm text-gray-500">
                                    <span><i class="fas fa-users mr-1"></i>影响 <strong class="text-gray-800">1,856</strong> 用户</span>
                                    <span><i class="fas fa-repeat mr-1"></i>出现 <strong class="text-gray-800">4,231</strong> 次</span>
                                    <span><i class="fas fa-clock mr-1"></i>首次: 5天前</span>
                                    <span><i class="fas fa-history mr-1"></i>最近: 15分钟前</span>
                                </div>
                            </div>
                            <div class="flex items-center space-x-4">
                                <div class="text-right">
                                    <p class="text-2xl font-bold text-green-500">-12%</p>
                                    <p class="text-xs text-gray-400">较昨日</p>
                                </div>
                                <i class="fas fa-chevron-down text-gray-400 transition-transform" id="pattern-2-icon"></i>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 展开的维度分析 -->
                    <div id="pattern-2-detail" class="hidden border-t border-gray-100 bg-gray-50 p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="font-semibold text-gray-800">维度分析</h4>
                            <button onclick="showPage('page-pattern-analysis')" class="text-sm text-blue-500 hover:underline">
                                查看详情 <i class="fas fa-arrow-right ml-1"></i>
                            </button>
                        </div>
                        
                        <div class="grid grid-cols-4 gap-4">
                            <!-- 版本分布 -->
                            <div class="bg-white rounded-lg p-4 border border-gray-200">
                                <h5 class="text-sm font-medium text-gray-700 mb-3">
                                    <i class="fas fa-code-branch mr-1 text-blue-500"></i>版本分布
                                </h5>
                                <div class="space-y-2">
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">v3.2.1</span>
                                        <span class="font-medium text-yellow-600">65%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-yellow-500" style="width: 65%"></div>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">v3.2.0</span>
                                        <span class="font-medium">28%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-blue-400" style="width: 28%"></div>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">其他</span>
                                        <span class="font-medium">7%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-gray-300" style="width: 7%"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 设备分布 -->
                            <div class="bg-white rounded-lg p-4 border border-gray-200">
                                <h5 class="text-sm font-medium text-gray-700 mb-3">
                                    <i class="fas fa-mobile-alt mr-1 text-purple-500"></i>设备分布
                                </h5>
                                <div class="space-y-2">
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">iPhone 12</span>
                                        <span class="font-medium text-red-500">35%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-red-500" style="width: 35%"></div>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">Xiaomi 12</span>
                                        <span class="font-medium">22%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-purple-400" style="width: 22%"></div>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">其他中低端</span>
                                        <span class="font-medium">43%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-gray-400" style="width: 43%"></div>
                                    </div>
                                </div>
                                <p class="text-xs text-red-500 mt-2"><i class="fas fa-info-circle mr-1"></i>中低端设备为主</p>
                            </div>
                            
                            <!-- 系统分布 -->
                            <div class="bg-white rounded-lg p-4 border border-gray-200">
                                <h5 class="text-sm font-medium text-gray-700 mb-3">
                                    <i class="fas fa-laptop mr-1 text-green-500"></i>系统分布
                                </h5>
                                <div class="space-y-2">
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">Android 13</span>
                                        <span class="font-medium">45%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-green-500" style="width: 45%"></div>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">iOS 16.x</span>
                                        <span class="font-medium">32%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-green-400" style="width: 32%"></div>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">其他</span>
                                        <span class="font-medium">23%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-gray-300" style="width: 23%"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 影响用户列表 -->
                            <div class="bg-white rounded-lg p-4 border border-gray-200">
                                <h5 class="text-sm font-medium text-gray-700 mb-3">
                                    <i class="fas fa-users mr-1 text-orange-500"></i>影响用户 (1,856)
                                </h5>
                                <div class="space-y-2 text-sm">
                                    <div class="flex items-center justify-between">
                                        <span class="text-blue-600">10093456</span>
                                        <span class="text-gray-400">15分钟前</span>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-blue-600">10094567</span>
                                        <span class="text-gray-400">22分钟前</span>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-blue-600">10095678</span>
                                        <span class="text-gray-400">35分钟前</span>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-blue-600">10096789</span>
                                        <span class="text-gray-400">48分钟前</span>
                                    </div>
                                </div>
                                <button class="text-xs text-blue-500 hover:underline mt-2 block">查看全部用户 →</button>
                            </div>
                        </div>
                        
                        <!-- 处理经验摘要 -->
                        <div class="mt-4 pt-4 border-t border-gray-200">
                            <div class="flex items-center justify-between mb-3">
                                <h5 class="text-sm font-medium text-gray-700">
                                    <i class="fas fa-lightbulb mr-1 text-yellow-500"></i>处理经验
                                    <span class="ml-1 px-1.5 py-0.5 bg-blue-100 text-blue-600 text-xs rounded-full">2</span>
                                </h5>
                                <div class="flex items-center space-x-2">
                                    <button onclick="event.stopPropagation(); openExperienceModal('add')" class="text-xs text-blue-500 hover:underline">
                                        <i class="fas fa-plus mr-1"></i>添加经验
                                    </button>
                                </div>
                            </div>
                            <div class="bg-white rounded-lg p-3 border border-gray-200">
                                <div class="flex items-start space-x-3">
                                    <div class="w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center flex-shrink-0">
                                        <span class="text-white text-sm font-medium">赵</span>
                                    </div>
                                    <div class="flex-1 min-w-0">
                                        <div class="flex items-center space-x-2 mb-1">
                                            <span class="text-sm font-medium text-gray-800">性能优化建议</span>
                                        </div>
                                        <p class="text-xs text-gray-500 line-clamp-2">
                                            帧率下降主要发生在中低端设备上，建议在战斗场景中降低特效等级，
                                            或使用动态LOD系统根据设备性能调整渲染质量...
                                        </p>
                                        <div class="flex items-center space-x-3 mt-2 text-xs text-gray-400">
                                            <span>赵六 · 1天前</span>
                                            <span><i class="fas fa-thumbs-up mr-1"></i>8</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 模式3: 连接超时 -->
                <div class="card overflow-hidden">
                    <div class="p-4 cursor-pointer hover:bg-gray-50" onclick="togglePatternDetail('pattern-3')">
                        <div class="flex items-start justify-between">
                            <div class="flex-1">
                                <div class="flex items-center space-x-3 mb-2">
                                    <span class="badge badge-gray">网络</span>
                                    <span class="text-xs text-gray-400">#PATTERN-1022</span>
                                </div>
                                <h3 class="font-semibold text-gray-800 text-lg">连接超时</h3>
                                <p class="text-sm text-gray-500 mt-1">网络连接超时，timeout > 5000ms</p>
                                <div class="flex items-center space-x-6 mt-3 text-sm text-gray-500">
                                    <span><i class="fas fa-users mr-1"></i>影响 <strong class="text-gray-800">523</strong> 用户</span>
                                    <span><i class="fas fa-repeat mr-1"></i>出现 <strong class="text-gray-800">1,245</strong> 次</span>
                                    <span><i class="fas fa-clock mr-1"></i>首次: 15天前</span>
                                    <span><i class="fas fa-history mr-1"></i>最近: 1小时前</span>
                                </div>
                            </div>
                            <div class="flex items-center space-x-4">
                                <div class="text-right">
                                    <p class="text-2xl font-bold text-gray-400">+5%</p>
                                    <p class="text-xs text-gray-400">较昨日</p>
                                </div>
                                <i class="fas fa-chevron-down text-gray-400 transition-transform" id="pattern-3-icon"></i>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 展开的维度分析 -->
                    <div id="pattern-3-detail" class="hidden border-t border-gray-100 bg-gray-50 p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="font-semibold text-gray-800">维度分析</h4>
                            <button onclick="showPage('page-pattern-analysis')" class="text-sm text-blue-500 hover:underline">
                                查看详情 <i class="fas fa-arrow-right ml-1"></i>
                            </button>
                        </div>
                        
                        <div class="grid grid-cols-4 gap-4">
                            <!-- 版本分布 -->
                            <div class="bg-white rounded-lg p-4 border border-gray-200">
                                <h5 class="text-sm font-medium text-gray-700 mb-3">
                                    <i class="fas fa-code-branch mr-1 text-blue-500"></i>版本分布
                                </h5>
                                <div class="space-y-2">
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">v3.2.1</span>
                                        <span class="font-medium">48%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-blue-500" style="width: 48%"></div>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">v3.2.0</span>
                                        <span class="font-medium">45%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-blue-400" style="width: 45%"></div>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">其他</span>
                                        <span class="font-medium">7%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-gray-300" style="width: 7%"></div>
                                    </div>
                                </div>
                                <p class="text-xs text-gray-500 mt-2"><i class="fas fa-check-circle mr-1 text-green-500"></i>版本分布均匀</p>
                            </div>
                            
                            <!-- 网络类型分布 -->
                            <div class="bg-white rounded-lg p-4 border border-gray-200">
                                <h5 class="text-sm font-medium text-gray-700 mb-3">
                                    <i class="fas fa-wifi mr-1 text-cyan-500"></i>网络类型
                                </h5>
                                <div class="space-y-2">
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">4G</span>
                                        <span class="font-medium text-red-500">58%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-red-500" style="width: 58%"></div>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">3G</span>
                                        <span class="font-medium">25%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-orange-400" style="width: 25%"></div>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">WiFi</span>
                                        <span class="font-medium">17%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-cyan-400" style="width: 17%"></div>
                                    </div>
                                </div>
                                <p class="text-xs text-red-500 mt-2"><i class="fas fa-exclamation-triangle mr-1"></i>移动网络为主</p>
                            </div>
                            
                            <!-- 地区分布 -->
                            <div class="bg-white rounded-lg p-4 border border-gray-200">
                                <h5 class="text-sm font-medium text-gray-700 mb-3">
                                    <i class="fas fa-map-marker-alt mr-1 text-red-500"></i>地区分布
                                </h5>
                                <div class="space-y-2">
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">西部地区</span>
                                        <span class="font-medium text-red-500">42%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-red-500" style="width: 42%"></div>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">中部地区</span>
                                        <span class="font-medium">35%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-orange-400" style="width: 35%"></div>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">东部地区</span>
                                        <span class="font-medium">23%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-green-400" style="width: 23%"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 影响用户列表 -->
                            <div class="bg-white rounded-lg p-4 border border-gray-200">
                                <h5 class="text-sm font-medium text-gray-700 mb-3">
                                    <i class="fas fa-users mr-1 text-orange-500"></i>影响用户 (523)
                                </h5>
                                <div class="space-y-2 text-sm">
                                    <div class="flex items-center justify-between">
                                        <span class="text-blue-600">10097123</span>
                                        <span class="text-gray-400">1小时前</span>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-blue-600">10098234</span>
                                        <span class="text-gray-400">2小时前</span>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-blue-600">10099345</span>
                                        <span class="text-gray-400">3小时前</span>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-blue-600">10100456</span>
                                        <span class="text-gray-400">4小时前</span>
                                    </div>
                                </div>
                                <button class="text-xs text-blue-500 hover:underline mt-2 block">查看全部用户 →</button>
                            </div>
                        </div>
                        
                        <!-- 处理经验摘要 -->
                        <div class="mt-4 pt-4 border-t border-gray-200">
                            <div class="flex items-center justify-between mb-3">
                                <h5 class="text-sm font-medium text-gray-700">
                                    <i class="fas fa-lightbulb mr-1 text-yellow-500"></i>处理经验
                                    <span class="ml-1 px-1.5 py-0.5 bg-gray-100 text-gray-500 text-xs rounded-full">0</span>
                                </h5>
                                <button onclick="event.stopPropagation(); openExperienceModal('add')" class="text-xs text-blue-500 hover:underline">
                                    <i class="fas fa-plus mr-1"></i>添加经验
                                </button>
                            </div>
                            <div class="bg-white rounded-lg p-4 border border-dashed border-gray-300 text-center">
                                <i class="fas fa-lightbulb text-gray-300 text-2xl mb-2"></i>
                                <p class="text-sm text-gray-400">暂无处理经验</p>
                                <button onclick="event.stopPropagation(); openExperienceModal('add')" class="text-xs text-blue-500 hover:underline mt-1">
                                    成为第一个分享经验的人
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 模式4: 内存警告 -->
                <div class="card overflow-hidden">
                    <div class="p-4 cursor-pointer hover:bg-gray-50" onclick="togglePatternDetail('pattern-4')">
                        <div class="flex items-start justify-between">
                            <div class="flex-1">
                                <div class="flex items-center space-x-3 mb-2">
                                    <span class="badge badge-warning">内存</span>
                                    <span class="text-xs text-gray-400">#PATTERN-1021</span>
                                </div>
                                <h3 class="font-semibold text-gray-800 text-lg">内存警告</h3>
                                <p class="text-sm text-gray-500 mt-1">检测到内存使用率超过 80%，可能导致OOM</p>
                                <div class="flex items-center space-x-6 mt-3 text-sm text-gray-500">
                                    <span><i class="fas fa-users mr-1"></i>影响 <strong class="text-gray-800">312</strong> 用户</span>
                                    <span><i class="fas fa-repeat mr-1"></i>出现 <strong class="text-gray-800">856</strong> 次</span>
                                    <span><i class="fas fa-clock mr-1"></i>首次: 10天前</span>
                                    <span><i class="fas fa-history mr-1"></i>最近: 30分钟前</span>
                                </div>
                            </div>
                            <div class="flex items-center space-x-4">
                                <div class="text-right">
                                    <p class="text-2xl font-bold text-gray-400">+9%</p>
                                    <p class="text-xs text-gray-400">较昨日</p>
                                </div>
                                <i class="fas fa-chevron-down text-gray-400 transition-transform" id="pattern-4-icon"></i>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 展开的维度分析 -->
                    <div id="pattern-4-detail" class="hidden border-t border-gray-100 bg-gray-50 p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="font-semibold text-gray-800">维度分析</h4>
                            <button onclick="showPage('page-pattern-analysis')" class="text-sm text-blue-500 hover:underline">
                                查看详情 <i class="fas fa-arrow-right ml-1"></i>
                            </button>
                        </div>
                        
                        <div class="grid grid-cols-4 gap-4">
                            <!-- 版本分布 -->
                            <div class="bg-white rounded-lg p-4 border border-gray-200">
                                <h5 class="text-sm font-medium text-gray-700 mb-3">
                                    <i class="fas fa-code-branch mr-1 text-blue-500"></i>版本分布
                                </h5>
                                <div class="space-y-2">
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">v3.2.1</span>
                                        <span class="font-medium">52%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-blue-500" style="width: 52%"></div>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">v3.2.0</span>
                                        <span class="font-medium">41%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-blue-400" style="width: 41%"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 设备内存分布 -->
                            <div class="bg-white rounded-lg p-4 border border-gray-200">
                                <h5 class="text-sm font-medium text-gray-700 mb-3">
                                    <i class="fas fa-memory mr-1 text-yellow-500"></i>设备内存
                                </h5>
                                <div class="space-y-2">
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">4GB以下</span>
                                        <span class="font-medium text-red-500">68%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-red-500" style="width: 68%"></div>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">4-6GB</span>
                                        <span class="font-medium">25%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-yellow-400" style="width: 25%"></div>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">6GB以上</span>
                                        <span class="font-medium">7%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-green-400" style="width: 7%"></div>
                                    </div>
                                </div>
                                <p class="text-xs text-red-500 mt-2"><i class="fas fa-exclamation-triangle mr-1"></i>低内存设备为主</p>
                            </div>
                            
                            <!-- 场景分布 -->
                            <div class="bg-white rounded-lg p-4 border border-gray-200">
                                <h5 class="text-sm font-medium text-gray-700 mb-3">
                                    <i class="fas fa-gamepad mr-1 text-indigo-500"></i>触发场景
                                </h5>
                                <div class="space-y-2">
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">副本BOSS</span>
                                        <span class="font-medium">45%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-indigo-500" style="width: 45%"></div>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">PVP战斗</span>
                                        <span class="font-medium">32%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-indigo-400" style="width: 32%"></div>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">其他</span>
                                        <span class="font-medium">23%</span>
                                    </div>
                                    <div class="progress-bar h-1.5">
                                        <div class="progress-bar-fill bg-gray-300" style="width: 23%"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 影响用户列表 -->
                            <div class="bg-white rounded-lg p-4 border border-gray-200">
                                <h5 class="text-sm font-medium text-gray-700 mb-3">
                                    <i class="fas fa-users mr-1 text-orange-500"></i>影响用户 (312)
                                </h5>
                                <div class="space-y-2 text-sm">
                                    <div class="flex items-center justify-between">
                                        <span class="text-blue-600">10101567</span>
                                        <span class="text-gray-400">30分钟前</span>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-blue-600">10102678</span>
                                        <span class="text-gray-400">45分钟前</span>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-blue-600">10103789</span>
                                        <span class="text-gray-400">1小时前</span>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-blue-600">10104890</span>
                                        <span class="text-gray-400">2小时前</span>
                                    </div>
                                </div>
                                <button class="text-xs text-blue-500 hover:underline mt-2 block">查看全部用户 →</button>
                            </div>
                        </div>
                        
                        <!-- 处理经验摘要 -->
                        <div class="mt-4 pt-4 border-t border-gray-200">
                            <div class="flex items-center justify-between mb-3">
                                <h5 class="text-sm font-medium text-gray-700">
                                    <i class="fas fa-lightbulb mr-1 text-yellow-500"></i>处理经验
                                    <span class="ml-1 px-1.5 py-0.5 bg-blue-100 text-blue-600 text-xs rounded-full">1</span>
                                </h5>
                                <button onclick="event.stopPropagation(); openExperienceModal('add')" class="text-xs text-blue-500 hover:underline">
                                    <i class="fas fa-plus mr-1"></i>添加经验
                                </button>
                            </div>
                            <div class="bg-white rounded-lg p-3 border border-gray-200">
                                <div class="flex items-start space-x-3">
                                    <div class="w-8 h-8 bg-indigo-500 rounded-full flex items-center justify-center flex-shrink-0">
                                        <span class="text-white text-sm font-medium">陈</span>
                                    </div>
                                    <div class="flex-1 min-w-0">
                                        <div class="flex items-center space-x-2 mb-1">
                                            <span class="text-sm font-medium text-gray-800">内存优化方案</span>
                                        </div>
                                        <p class="text-xs text-gray-500 line-clamp-2">
                                            建议在战斗场景加载前预先释放无用资源，使用对象池管理技能特效，
                                            并对低内存设备启用自动降画质模式...
                                        </p>
                                        <div class="flex items-center space-x-3 mt-2 text-xs text-gray-400">
                                            <span>陈七 · 3天前</span>
                                            <span><i class="fas fa-thumbs-up mr-1"></i>5</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== 页面6: 版本比对 ==================== -->
        <div id="page-version" class="page">
            <!-- 面包屑 -->
            <nav class="breadcrumb flex items-center space-x-2 text-sm mb-6">
                <a href="#" onclick="showPage('page-search')"><i class="fas fa-home"></i></a>
                <span class="text-gray-400">/</span>
                <span class="text-gray-800 font-medium">版本比对</span>
            </nav>
            
            <!-- 版本选择 -->
            <div class="card p-6 mb-6">
                <h3 class="font-semibold text-gray-800 mb-4">选择对比版本</h3>
                <div class="flex items-end space-x-6">
                    <div class="flex-1">
                        <label class="text-sm text-gray-500 mb-2 block">版本 A</label>
                        <select class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option>v3.2.1 (当前版本)</option>
                            <option>v3.2.0</option>
                            <option>v3.1.9</option>
                        </select>
                    </div>
                    <div class="text-gray-400 pb-3">
                        <i class="fas fa-exchange-alt text-xl"></i>
                    </div>
                    <div class="flex-1">
                        <label class="text-sm text-gray-500 mb-2 block">版本 B</label>
                        <select class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option>v3.2.0</option>
                            <option>v3.1.9</option>
                            <option>v3.1.8</option>
                        </select>
                    </div>
                    <div class="flex-1">
                        <label class="text-sm text-gray-500 mb-2 block">时间范围</label>
                        <select class="w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option>发布后24小时</option>
                            <option selected>发布后7天</option>
                            <option>自定义</option>
                        </select>
                    </div>
                    <button class="px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition">
                        <i class="fas fa-sync-alt mr-2"></i>对比
                    </button>
                </div>
            </div>
            
            <!-- 整体指标对比 -->
            <div class="card p-6 mb-6">
                <h3 class="font-semibold text-gray-800 mb-4">整体指标对比</h3>
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-4 py-3 text-left text-sm font-medium text-gray-500">指标</th>
                                <th class="px-4 py-3 text-center text-sm font-medium text-blue-600">v3.2.1</th>
                                <th class="px-4 py-3 text-center text-sm font-medium text-gray-600">v3.2.0</th>
                                <th class="px-4 py-3 text-center text-sm font-medium text-gray-500">变化</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-100">
                            <tr>
                                <td class="px-4 py-4 font-medium text-gray-800">问题上报率</td>
                                <td class="px-4 py-4 text-center text-red-500 font-semibold">0.45%</td>
                                <td class="px-4 py-4 text-center text-gray-600">0.32%</td>
                                <td class="px-4 py-4 text-center">
                                    <span class="text-red-500 font-medium"><i class="fas fa-arrow-up mr-1"></i>+40.6%</span>
                                </td>
                            </tr>
                            <tr>
                                <td class="px-4 py-4 font-medium text-gray-800">上报用户数</td>
                                <td class="px-4 py-4 text-center font-semibold">5,782</td>
                                <td class="px-4 py-4 text-center text-gray-600">3,421</td>
                                <td class="px-4 py-4 text-center">
                                    <span class="text-red-500 font-medium"><i class="fas fa-arrow-up mr-1"></i>+69%</span>
                                </td>
                            </tr>
                            <tr>
                                <td class="px-4 py-4 font-medium text-gray-800">问题模式数</td>
                                <td class="px-4 py-4 text-center font-semibold">23</td>
                                <td class="px-4 py-4 text-center text-gray-600">18</td>
                                <td class="px-4 py-4 text-center">
                                    <span class="text-red-500 font-medium"><i class="fas fa-arrow-up mr-1"></i>+5</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- 新增问题模式 -->
            <div class="card p-6 mb-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="font-semibold text-gray-800">
                        <i class="fas fa-exclamation-circle text-red-500 mr-2"></i>
                        v3.2.1 新增问题模式
                    </h3>
                    <span class="badge badge-error">5 个新问题</span>
                </div>
                
                <div class="space-y-3">
                    <div class="p-4 border border-red-200 bg-red-50 rounded-lg flex items-center justify-between">
                        <div>
                            <div class="flex items-center space-x-2 mb-1">
                                <span class="badge badge-error">异常</span>
                                <span class="font-medium text-gray-800">NullReferenceException in BossController</span>
                            </div>
                            <p class="text-sm text-gray-500">仅在 v3.2.1 出现，v3.2.0 无此问题</p>
                        </div>
                        <div class="text-right">
                            <p class="text-xl font-bold text-red-500">2,341</p>
                            <p class="text-xs text-gray-400">影响用户</p>
                        </div>
                    </div>
                    
                    <div class="p-4 border border-yellow-200 bg-yellow-50 rounded-lg flex items-center justify-between">
                        <div>
                            <div class="flex items-center space-x-2 mb-1">
                                <span class="badge badge-warning">性能</span>
                                <span class="font-medium text-gray-800">帧率下降 (副本场景)</span>
                            </div>
                            <p class="text-sm text-gray-500">v3.2.1 出现率较 v3.2.0 高 150%</p>
                        </div>
                        <div class="text-right">
                            <p class="text-xl font-bold text-yellow-600">1,856</p>
                            <p class="text-xs text-gray-400">影响用户</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 问题模式对比 -->
            <div class="card p-6">
                <h3 class="font-semibold text-gray-800 mb-4">问题模式对比</h3>
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-4 py-3 text-left text-sm font-medium text-gray-500">问题模式</th>
                                <th class="px-4 py-3 text-center text-sm font-medium text-blue-600">v3.2.1</th>
                                <th class="px-4 py-3 text-center text-sm font-medium text-gray-600">v3.2.0</th>
                                <th class="px-4 py-3 text-center text-sm font-medium text-gray-500">变化</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-100">
                            <tr class="hover:bg-gray-50 cursor-pointer" onclick="showPage('page-pattern-analysis')">
                                <td class="px-4 py-3">
                                    <span class="badge badge-error mr-2">异常</span>
                                    <span class="font-medium">NullReferenceException</span>
                                </td>
                                <td class="px-4 py-3 text-center">2,341</td>
                                <td class="px-4 py-3 text-center text-gray-400">0</td>
                                <td class="px-4 py-3 text-center text-red-500">新增</td>
                            </tr>
                            <tr class="hover:bg-gray-50 cursor-pointer">
                                <td class="px-4 py-3">
                                    <span class="badge badge-warning mr-2">性能</span>
                                    <span class="font-medium">帧率下降</span>
                                </td>
                                <td class="px-4 py-3 text-center">1,856</td>
                                <td class="px-4 py-3 text-center">742</td>
                                <td class="px-4 py-3 text-center text-red-500">+150%</td>
                            </tr>
                            <tr class="hover:bg-gray-50 cursor-pointer">
                                <td class="px-4 py-3">
                                    <span class="badge badge-gray mr-2">网络</span>
                                    <span class="font-medium">连接超时</span>
                                </td>
                                <td class="px-4 py-3 text-center">523</td>
                                <td class="px-4 py-3 text-center">498</td>
                                <td class="px-4 py-3 text-center text-gray-500">+5%</td>
                            </tr>
                            <tr class="hover:bg-gray-50 cursor-pointer">
                                <td class="px-4 py-3">
                                    <span class="badge badge-warning mr-2">性能</span>
                                    <span class="font-medium">内存警告</span>
                                </td>
                                <td class="px-4 py-3 text-center">312</td>
                                <td class="px-4 py-3 text-center">287</td>
                                <td class="px-4 py-3 text-center text-gray-500">+9%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>

    <script>
        // 页面切换
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
            window.scrollTo(0, 0);
        }

        // 搜索
        function doSearch() {
            const input = document.getElementById('searchInput').value;
            if (input.trim()) {
                showPage('page-user-logs');
            }
        }

        // 快速搜索
        function quickSearch(value) {
            document.getElementById('searchInput').value = value;
            doSearch();
        }

        // 回车搜索
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                doSearch();
            }
        });

        // 日志详情 Tab 切换
        function switchLogTab(btn, tabId) {
            // 切换按钮状态
            btn.closest('.flex').querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            
            // 切换内容
            document.getElementById('tab-patterns').classList.add('hidden');
            document.getElementById('tab-raw').classList.add('hidden');
            
            if (tabId === 'patterns') {
                document.getElementById('tab-patterns').classList.remove('hidden');
            } else {
                document.getElementById('tab-raw').classList.remove('hidden');
            }
        }

        // 模式分析 Tab 切换
        function switchPatternTab(btn, tabId) {
            // 切换按钮状态
            btn.closest('.flex').querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            
            // 切换内容
            document.getElementById('pattern-tab-scope').classList.add('hidden');
            document.getElementById('pattern-tab-dimension').classList.add('hidden');
            document.getElementById('pattern-tab-samples').classList.add('hidden');
            document.getElementById('pattern-tab-experience').classList.add('hidden');
            
            document.getElementById('pattern-tab-' + tabId).classList.remove('hidden');
        }

        // 打开处理经验弹窗
        function openExperienceModal(mode) {
            const modal = document.getElementById('experience-modal');
            const title = document.getElementById('modal-title');
            const editMode = document.getElementById('modal-edit-mode');
            const viewMode = document.getElementById('modal-view-mode');
            const footerEdit = document.getElementById('modal-footer-edit');
            const footerView = document.getElementById('modal-footer-view');
            
            modal.classList.remove('hidden');
            
            if (mode === 'add') {
                title.textContent = '添加处理经验';
                editMode.classList.remove('hidden');
                viewMode.classList.add('hidden');
                footerEdit.classList.remove('hidden');
                footerView.classList.add('hidden');
            } else if (mode === 'edit') {
                title.textContent = '编辑处理经验';
                editMode.classList.remove('hidden');
                viewMode.classList.add('hidden');
                footerEdit.classList.remove('hidden');
                footerView.classList.add('hidden');
            } else if (mode === 'view') {
                title.textContent = '查看处理经验';
                editMode.classList.add('hidden');
                viewMode.classList.remove('hidden');
                footerEdit.classList.add('hidden');
                footerView.classList.remove('hidden');
            }
        }

        // 关闭处理经验弹窗
        function closeExperienceModal() {
            document.getElementById('experience-modal').classList.add('hidden');
        }

        // 保存处理经验
        function saveExperience() {
            // 模拟保存
            alert('处理经验已保存！');
            closeExperienceModal();
        }

        // 切换模式详情展开/折叠
        function togglePatternDetail(patternId) {
            const detail = document.getElementById(patternId + '-detail');
            const icon = document.getElementById(patternId + '-icon');
            
            if (detail.classList.contains('hidden')) {
                detail.classList.remove('hidden');
                icon.style.transform = 'rotate(180deg)';
            } else {
                detail.classList.add('hidden');
                icon.style.transform = 'rotate(0deg)';
            }
        }
    </script>
</body>
</html>
