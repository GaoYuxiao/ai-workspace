---
name: writer
description: 撰写功能描述类产品需求文档(PRD)。当用户需要写PRD、需求文档、功能设计文档，或提到产品需求、功能规格说明时使用。
---

# PRD 产品需求文档撰写

帮助撰写规范、完整的功能描述类产品需求文档。你可以根据截图、文字或者HTML页面，理解该功能或者系统的意义，并为其补充对应的PRD说明文档。

## 快速开始

撰写PRD前，收集以下信息：
1. **功能名称**：需求的标题/模块名
2. **需求背景**：为什么要做这个功能
3. **目标用户**：谁会使用这个功能
4. **核心功能点**：需要实现哪些能力

---

## 参考文档

| 文档 | 说明 | 路径 |
|------|------|------|
| 标准PRD示例 | 展示各章节的标准写法和详细程度 | `./examples/standard-prd-example.md` |
| 审核报告模板 | 方案审核报告的输出模板 | `./examples/review-report-template.md` |

---

## PRD 文档结构模板

```markdown
# [功能名称] - 需求文档 v1.0

## 文档信息

| 属性 | 内容 |
|------|------|
| 文档版本 | v1.0 |
| 创建日期 | YYYY-MM-DD |
| 文档状态 | 草稿/评审中/已确认 |
| 产品模块 | [所属产品模块] |

---

## 一、需求背景

### 1.1 背景说明
[描述业务背景、现状问题、为什么需要这个功能]

### 1.2 目标用户
- [用户角色1]
- [用户角色2]

### 1.3 核心价值
1. **[价值点1]**：[说明]
2. **[价值点2]**：[说明]

### 1.4 权限说明
[结合不同的用户角色，描述每个功能允许的权限及权限粒度]

例如：
sre：SRE负责维护业务索引集，创建日志采集配置，为研发提供平台能力的配置服务
| 功能模块 | 权限 | 权限粒度 |
|--------|------|------|
| 采集创建 | 开启 | 按功能 |
| 数据接入 | 开启 | 按采集项 |
| 日志检索 | 开启 | 按业务 |

---

## 二、功能优先级总览

| 优先级 | 定义 | 说明 |
|--------|------|------|
| **P0** | 核心必备 | MVP 版本必须实现 |
| **P1** | 重要功能 | 第二阶段实现 |
| **P2** | 增强功能 | 后续迭代实现 |

---

## 三、功能详细设计

### 3.1 [功能模块名]【优先级】

#### 3.1.1 功能概述
[简要描述功能的目的和作用]

#### 3.1.2 功能说明
- 菜单路径：`[一级菜单] > [二级菜单] > [页面名]`
- 页面URL：`/module/submodule`

#### 3.1.3 页面原型

**[功能名称]主页面**

![功能主页面](./screenshots/xx-module-overview.png)

**[子功能名称]**

![子功能截图](./screenshots/xx-module-subfunction.png)

> 说明：此处为截图占位，请用户自行补充原型截图

#### 3.1.4 字段说明

| 字段名称 | 字段类型 | 必填 | 默认值 | 校验规则 | 错误提示 |
|---------|---------|------|--------|---------|---------|
| 名称 | 文本输入 | 是 | - | 2-64字符 | "名称长度需为2-64个字符" |
| 类型 | 下拉选择 | 是 | Web | - | - |

#### 3.1.5 交互说明

1. **[操作1]**
   - 触发方式：[点击/输入/选择...]
   - 操作反馈：[提示/跳转/刷新...]
   - 成功场景：[结果描述]
   - 失败场景：[错误处理]

#### 3.1.6 状态设计

| 状态类型 | 触发条件 | UI表现 | 用户操作 |
|---------|---------|--------|---------|
| 空状态 | 列表无数据 | 居中提示+操作引导 | 可点击"新建" |
| 加载状态 | 数据请求中 | 骨架屏/Loading | 不可操作 |
| 错误状态 | 接口失败 | 错误提示+重试按钮 | 可点击重试 |
| 无权限 | 权限不足 | 权限提示 | 可申请权限 |

#### 3.1.7 异常与边界

| 场景 | 处理方式 |
|------|---------|
| 网络超时 | 显示错误提示，提供重试按钮 |
| 表单校验失败 | 输入框标红，显示具体错误信息 |
| 并发编辑冲突 | 提示"数据已被他人修改"，提供刷新选项 |
| 数据不存在 | 跳转404页面或返回列表 |

---

## 四、通用组件规范

### 4.1 表单组件

#### 4.1.1 输入框
| 场景 | 行为 |
|------|------|
| 必填校验 | 失焦时校验，为空显示"请输入xxx" |
| 格式校验 | 失焦时校验，不符合显示具体规则 |
| 字符限制 | 实时显示已输入/最大字符数 |
| 禁用状态 | 灰色背景，鼠标显示禁用图标 |

#### 4.1.2 下拉选择
| 场景 | 行为 |
|------|------|
| 数据加载 | 展开时显示Loading |
| 无匹配项 | 显示"无匹配结果" |
| 搜索过滤 | 支持输入关键词过滤选项 |

#### 4.1.3 表单提交
| 场景 | 行为 |
|------|------|
| 提交中 | 按钮显示Loading，禁用重复提交 |
| 提交成功 | Toast提示"保存成功"，自动关闭/跳转 |
| 提交失败 | Toast提示错误原因，保留表单内容 |
| 网络错误 | 提示"网络异常，请稍后重试" |

### 4.2 列表组件

#### 4.2.1 数据加载
| 场景 | 行为 |
|------|------|
| 首次加载 | 显示骨架屏 |
| 刷新加载 | 保持数据，右上角显示刷新图标 |
| 加载失败 | 显示错误状态，提供重试按钮 |
| 空数据 | 显示空状态插图和引导文案 |

#### 4.2.2 分页
| 场景 | 行为 |
|------|------|
| 默认每页 | 10/20/50 可选 |
| 页码跳转 | 支持输入页码直接跳转 |
| 超出范围 | 自动跳转到最后一页 |

### 4.3 弹窗/抽屉

| 场景 | 行为 |
|------|------|
| 打开 | 遮罩层渐显，内容滑入 |
| 关闭 | 点击遮罩/X按钮/取消按钮关闭 |
| 未保存关闭 | 二次确认"内容未保存，确定关闭？" |
| ESC关闭 | 支持ESC键关闭 |

### 4.4 删除确认

| 元素 | 说明 |
|------|------|
| 标题 | "确认删除" |
| 内容 | "删除后数据不可恢复，确定删除 xxx 吗？" |
| 按钮 | [取消] [确认删除]（红色警示） |

---

## 五、全局提示规范

### 5.1 Toast 提示

| 类型 | 图标 | 示例文案 | 持续时间 |
|------|------|---------|---------|
| 成功 | ✓ 绿色 | "保存成功" | 2秒 |
| 失败 | ✗ 红色 | "保存失败：xxx" | 3秒 |
| 警告 | ! 黄色 | "xxx即将过期" | 3秒 |
| 信息 | i 蓝色 | "已复制到剪贴板" | 2秒 |

### 5.2 常用错误提示文案

| 错误类型 | 提示文案 |
|---------|---------|
| 必填校验 | "请输入{字段名}" / "请选择{字段名}" |
| 格式错误 | "{字段名}格式不正确" |
| 长度限制 | "{字段名}长度需为{min}-{max}个字符" |
| 唯一性冲突 | "{字段名}已存在" |
| 权限不足 | "暂无权限，请联系管理员" |
| 网络错误 | "网络异常，请检查网络后重试" |
| 服务器错误 | "服务器异常，请稍后重试" |
| 资源不存在 | "数据不存在或已被删除" |
| 操作频繁 | "操作过于频繁，请稍后重试" |
| 登录过期 | "登录已过期，请重新登录" |

---

## 六、页面状态清单

每个页面/模块必须定义以下状态：

### 6.1 必须定义的状态

| 状态 | 说明 | 设计要点 |
|------|------|---------|
| **默认状态** | 正常展示数据 | 主要功能展示 |
| **空状态** | 无数据时 | 插图+文案+操作引导 |
| **加载状态** | 数据加载中 | 骨架屏或Loading |
| **错误状态** | 加载/操作失败 | 错误提示+重试操作 |

### 6.2 按需定义的状态

| 状态 | 说明 | 设计要点 |
|------|------|---------|
| 无权限状态 | 无查看/操作权限 | 权限说明+申请入口 |
| 部分加载状态 | 部分数据加载失败 | 局部错误提示 |
| 离线状态 | 网络断开 | 离线提示+重连机制 |
| 维护状态 | 系统维护中 | 维护公告 |

---

## 七、版本规划

### 7.1 MVP 版本（v1.0）

| 功能 | 优先级 | 说明 |
|------|--------|------|
| [功能1] | P0 | [说明] |

---

## 八、非功能需求

### 8.1 性能要求

| 场景 | 指标 |
|------|------|
| 首屏加载 | FCP < 1.5s, LCP < 2.5s |
| 列表加载 | < 2s |
| 表单提交 | < 3s |
| 操作响应 | < 200ms |

### 8.2 兼容性要求

| 类型 | 要求 |
|------|------|
| 浏览器 | Chrome 90+, Safari 14+, Firefox 88+, Edge 90+ |
| 分辨率 | 最小 1280x720 |

### 8.3 安全要求

| 要求 | 说明 |
|------|------|
| 身份认证 | 所有接口需要身份认证 |
| 权限校验 | 前后端双重校验 |
| 敏感数据 | 脱敏展示（如Token、手机号） |

---

## 九、数据模型

### 9.1 [实体名称]

```json
{
  "id": 1,
  "name": "示例",
  "created_at": "2026-01-15T10:00:00Z"
}
```

---

## 十、接口清单

| 接口 | 方法 | 路径 | 说明 |
|------|------|------|------|
| 列表查询 | GET | /api/xxx/ | 获取列表 |
| 详情查询 | GET | /api/xxx/{id}/ | 获取详情 |
| 创建 | POST | /api/xxx/ | 创建记录 |
| 更新 | PUT | /api/xxx/{id}/ | 更新记录 |
| 删除 | DELETE | /api/xxx/{id}/ | 删除记录 |

---

## 十一、修订记录

| 版本 | 日期 | 修订人 | 修订内容 |
|------|------|--------|---------|
| v1.0 | YYYY-MM-DD | - | 初始版本 |
```

---

## 各章节撰写要点

### 功能详细设计

每个小标题中都应该有一个对于该功能或模块的描述，补充这个子功能的作用描述。

**每个功能模块必须包含：**

| 章节 | 必要性 | 内容要点 |
|------|--------|----------|
| 功能概述 | 必须 | 一段话说明功能目的 |
| 功能说明 | 必须 | 菜单路径、页面URL |
| 页面原型 | 必须 | 预留截图占位，大功能和子功能都需要对应截图（用户自行补充） |
| **字段说明** | 必须 | 字段类型、必填、校验规则、错误提示 |
| 交互说明 | 必须 | 触发方式、操作反馈、成功/失败场景 |
| **状态设计** | 必须 | 空状态、加载态、错误态的处理 |
| **异常与边界** | 必须 | 异常场景的处理方式 |

### 字段说明必须包含

对于表单类功能，每个字段需要定义：

| 属性 | 说明 | 示例 |
|------|------|------|
| 字段名称 | 显示名称 | "应用名称" |
| 字段类型 | 输入类型 | 文本输入/下拉选择/日期选择... |
| 必填 | 是否必填 | 是/否 |
| 默认值 | 默认显示值 | "production" |
| 校验规则 | 格式/长度/范围 | "2-64字符，支持中英文" |
| **错误提示** | 校验失败提示 | "名称长度需为2-64个字符" |
| 帮助文案 | 输入提示 | "建议使用项目名作为应用名称" |

### 交互说明必须包含

对于每个用户操作，需要定义完整的交互闭环：

```markdown
**[操作名称]**
- 触发方式：点击"保存"按钮
- 前置校验：表单必填项校验
- 操作反馈：按钮显示Loading状态
- 成功场景：Toast提示"保存成功"，3秒后自动关闭弹窗
- 失败场景：Toast提示错误原因，保留表单内容
- 边界情况：网络超时时提示"请求超时，请重试"
```

### 状态设计检查清单

每个列表/详情页面必须回答以下问题：

| 问题 | 需要定义 |
|------|---------|
| 数据为空时显示什么？ | 空状态UI + 引导文案 + 操作按钮 |
| 数据加载中显示什么？ | 骨架屏 or Loading |
| 加载失败显示什么？ | 错误提示 + 重试按钮 |
| 无权限时显示什么？ | 权限说明 + 申请入口 |
| 部分字段缺失怎么显示？ | 默认值 or "-" or 隐藏 |

---

## 页面原型截图要求

> 注意：以下为截图要求说明，截图由用户自行准备和补充

1. **大功能模块**：必须有完整页面截图
2. **子功能/Tab**：每个子功能Tab需要独立截图
3. **状态截图**：空状态、错误状态需要截图

### 截图命名规范

按功能模块层级命名截图文件：

```
screenshots/
├── 01-overview.png              # 总览页面
├── 02-module-list.png           # 模块1-列表页
├── 02-module-list-empty.png     # 模块1-列表页-空状态
├── 02-module-detail.png         # 模块1-详情页
├── 02-module-create-dialog.png  # 模块1-新建弹窗
├── 02-module-error.png          # 模块1-错误状态
└── ...
```

命名格式：`{序号}-{功能模块}-{子功能/状态}.png`

---

## 截图检查清单

每个功能模块需要的截图：

| 截图类型 | 必要性 | 说明 |
|----------|--------|------|
| 模块总览 | 必须 | 功能模块的完整页面截图 |
| 列表/表格 | 按需 | 有数据列表时截图 |
| 表单/编辑 | 按需 | 新建/编辑表单截图 |
| 弹窗/抽屉 | 按需 | 交互弹窗组件截图 |
| 详情页 | 按需 | 查看详情页面截图 |
| 配置项 | 按需 | 配置Tab/面板截图 |
| **空状态** | 必须 | 无数据时的页面状态 |
| **加载状态** | 按需 | Loading/骨架屏状态 |
| **错误状态** | 必须 | 错误/警告提示截图 |
| **表单校验** | 按需 | 校验失败的表单状态 |

---

## 优先级标注

在功能标题后标注优先级：
- `### 3.1 用户管理【P0】` - 核心功能
- `### 3.2 日志审计【P1】` - 重要功能
- `### 3.3 数据导出【P2】` - 增强功能

---

## 文档状态说明

| 状态 | 说明 |
|------|------|
| 草稿 | 初稿撰写中 |
| 评审中 | 提交评审，待确认 |
| 已确认 | 评审通过，可进入开发 |
| 已完成 | 功能已上线 |

---

## 撰写原则

1. **结构清晰**：使用多级标题，逻辑层次分明
2. **表格优先**：字段、配置、规则等使用表格呈现
3. **示例具体**：代码示例、数据模型给出具体JSON
4. **优先级明确**：每个功能模块标注P0/P1/P2
5. **可追溯**：保留版本号和修订记录
6. **闭环完整**：每个操作定义成功/失败/异常场景
7. **状态全覆盖**：每个页面定义空/加载/错误状态
8. **提示规范化**：错误提示使用统一的文案模板

---

## PRD 自检清单

撰写完成后，使用以下清单检查文档完整性：

### 基础检查

- [ ] 文档版本和日期已更新
- [ ] 需求背景清晰，目标用户明确
- [ ] 功能模块标注了优先级
- [ ] 每个模块有菜单路径和页面URL

### 功能设计检查

- [ ] 每个表单字段定义了校验规则和错误提示
- [ ] 每个操作定义了成功/失败反馈
- [ ] 每个列表定义了空状态处理
- [ ] 每个页面定义了加载状态
- [ ] 每个页面定义了错误状态处理

### 边界检查

- [ ] 定义了网络超时的处理
- [ ] 定义了并发编辑的处理
- [ ] 定义了权限不足的处理
- [ ] 定义了数据不存在的处理

### 前端实现检查

- [ ] 定义了页面路由
- [ ] 定义了性能要求
- [ ] 定义了浏览器兼容性
- [ ] 提供了接口清单

---

## 方案审核（必须输出）

> **重要**：PRD 撰写完成后，必须同时输出一份方案审核报告。审核报告与 PRD 文档一起交付。

### 审核模板

使用审核报告模板：`./examples/review-report-template.md`

### 审核角色与检查要点

| 审核角色 | 关注维度 | 核心检查点 |
|---------|---------|-----------|
| **技术人员** | 技术可行性 | 字段定义完整性、接口设计合理性、状态设计覆盖、异常处理完整 |
| **领域专家** | 业务完整性 | 需求背景、用户场景、功能模块划分、优先级排序、扩展性 |
| **用户视角** | 易用性 | 操作路径简洁、反馈及时、错误提示友好、帮助引导充分 |

### 问题严重程度

| 严重程度 | 定义 | 处理方式 |
|---------|------|---------|
| **严重** | 影响功能实现或用户体验的根本问题 | 必须修改后才能进入开发 |
| **一般** | 存在遗漏或不够完善的问题 | 建议修改，可并行开发 |
| **建议** | 可优化的细节问题 | 可选优化，不阻塞开发 |

### 执行说明

1. PRD 文档撰写完成后，**必须**紧接着输出审核报告
2. 审核报告保存为独立文件：`[PRD文档名]_审核报告.md`
3. 审核时要站在三个角色的视角真实地发现问题，而非走过场
4. 如果发现严重问题，应在审核报告中明确指出并给出改进建议

---
