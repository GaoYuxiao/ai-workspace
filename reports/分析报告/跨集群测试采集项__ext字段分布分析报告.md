# 跨集群测试采集项 - __ext 字段分布分析报告

## 分析概览

- **索引集名称**: 跨集群测试
- **索引集ID**: 2444
- **业务ID**: 2
- **分析时间范围**: 最近24小时 (2025-01-18 00:00:00 ~ 2025-01-19 00:00:00)
- **总日志量**: 259,283 条

## 字段分布详情

### 1. __ext.container_id (容器ID)

**统计摘要**:
- 唯一容器数: 51个
- 空值数量: 0条
- 总日志数: 259,283条

**Top 10 容器ID分布**:
| 容器ID | 日志数量 | 占比 |
|--------|---------|------|
| 3034645e96e062302ce4d5900376cbdd215553fa4992fdb821b71379ae97c53b | 59,345 | 22.89% |
| 43358fd19b35710e8c69a7c02a1b9c9e0432b6342ea0c539b0f62e00deb1eea0 | 62,993 | 24.29% |
| 0d3ffdf8ac83eedd8911ae676bb71dacb69e423b295e6a2ebf187a6a572c43b2 | 17,423 | 6.72% |
| 83ebb6ccf81b0440c21bf9abe8a4938294ed7766926d05201f71be5b904594fe | 32,851 | 12.67% |
| b28bec8d037102ece75ce35791d2a9644f56a1a3ba81d398c1cb41730e57accc | 52,507 | 20.25% |
| 650dcd1f1563f2d80720e692983fd4d4eb0ac2b63e465b254afd21b0ea26ae2c | 14,078 | 5.43% |
| a18302e455c33b2c56e4cbec0fd9c819cbd290d4fa7e0e18442dd654fa0a2c94 | 14,695 | 5.67% |
| 000dfbf43e6d1777a1930ebd2c58b1f1a83d3aee9edc671b911a38610b669944 | 632 | 0.24% |
| 10e9eea95f4ce2bade1a5c8c0c292439b127152da5d4e852444d035f5c226fc5 | 661 | 0.25% |
| b6989cd28d1756a55aa3b933398491f5305baf9bf738f59140fd538a7a189a04 | 323 | 0.12% |

**分析结论**: 
- 容器ID分布较为集中，前5个容器占约67.82%的日志量
- 大部分容器日志量较少（<1000条），说明存在大量短期运行的容器

---

### 2. __ext.container_image (容器镜像)

**统计摘要**:
- 唯一镜像数: 6个
- 空值数量: 0条

**镜像分布**:
| 镜像 | 日志数量 | 占比 |
|------|---------|------|
| sha256:a240db6952394647ab9708c7f54f0627331c36f9b4378dcc9887e62059c117d7 | 119,225 | 45.98% |
| sha256:a2b49f7c3d33984b50fe38dd8b8e50fc65ba68aa08750a221d09f2e1a9f59873 | 59,520 | 22.95% |
| sha256:abe00ad8b49ee13d9e71fbab84fcebdccccd66d32b2e52fd1ec6c6125ea62e7e | 62,993 | 24.29% |
| sha256:2de26f0f41a0f52dafa29729909618e32c67d6caac78816cf209fabad29274fd | 17,423 | 6.72% |
| sha256:1cb02844a59355238c92d31199603bf74746220e09165fa8bbbc2d1dc0279128 | 122 | 0.05% |

**分析结论**:
- 镜像分布高度集中，前3个镜像占93.22%的日志量
- 主要使用的镜像为 sha256:a240db6952394647ab9708c7f54f0627331c36f9b4378dcc9887e62059c117d7

---

### 3. __ext.container_name (容器名称)

**统计摘要**:
- 唯一容器名称数: 9个
- 空值数量: 0条

**容器名称分布**:
| 容器名称 | 日志数量 | 占比 |
|----------|---------|------|
| web | 253,892 | 97.92% |
| worker | 2,263 | 0.87% |
| bkpaas3-apiserver-deleting-instances | 1,200 | 0.46% |
| bkpaas3-apiserver-update-pending-status | 1,056 | 0.41% |
| bkpaas3-apiserver-clean-timeout-slug-pod | 552 | 0.21% |
| bkpaas3-svc-mysql-deleting-instances | 175 | 0.07% |
| check-migrate-db | 122 | 0.05% |
| bkpaas3-apiserver-clean-slug-tar | 23 | 0.01% |

**分析结论**:
- 容器名称分布极不均衡，`web` 容器占97.92%的日志量
- 其他容器主要是定时任务和清理任务，日志量较少

---

### 4. __ext.io_kubernetes_pod (Pod名称)

**统计摘要**:
- 唯一Pod数: 51个
- 空值数量: 0条

**Top 10 Pod分布**:
| Pod名称 | 日志数量 | 占比 |
|---------|---------|------|
| bkpaas3-apiserver-web-5bdc57969b-2xlcf | 52,507 | 20.25% |
| bkpaas3-svc-bkrepo-web-558766447d-m5cdb | 62,993 | 24.29% |
| bkpaas3-svc-mysql-web-74fb8f566d-rqqq9 | 59,345 | 22.89% |
| bkpaas3-apiserver-web-5bdc57969b-pnk9j | 32,851 | 12.67% |
| bkpaas3-apiserver-web-5bdc57969b-rmbxt | 14,695 | 5.67% |
| bkpaas3-apiserver-web-5bdc57969b-9xt56 | 14,078 | 5.43% |
| bkpaas3-webfe-web-7488d566-t5zlh | 17,423 | 6.72% |
| bkpaas3-apiserver-worker-67d9fbdfb8-nr88r | 661 | 0.25% |
| bkpaas3-apiserver-worker-67d9fbdfb8-p242d | 647 | 0.25% |
| bkpaas3-apiserver-worker-67d9fbdfb8-sdx5b | 323 | 0.12% |

**分析结论**:
- Pod分布主要集中在几个核心服务Pod
- `bkpaas3-apiserver-web` 和 `bkpaas3-svc-*` 系列Pod占主导地位
- 存在大量定时任务Pod（deleting-instances, clean-timeout-slug-pod等），但日志量较少

---

### 5. __ext.io_kubernetes_pod_ip (Pod IP地址)

**统计摘要**:
- 唯一IP数: 51个
- 空值数量: 237条

**Top 10 IP分布**:
| IP地址 | 日志数量 | 占比 |
|--------|---------|------|
| 9.166.30.241 | 52,507 | 20.25% |
| 9.166.30.246 | 62,993 | 24.29% |
| 9.166.30.249 | 59,345 | 22.89% |
| 9.166.30.243 | 32,851 | 12.67% |
| 9.166.58.219 | 14,695 | 5.67% |
| 9.166.58.220 | 14,078 | 5.43% |
| 9.166.61.198 | 17,423 | 6.72% |
| 9.166.58.218 | 661 | 0.25% |
| 9.166.30.244 | 647 | 0.25% |
| 9.166.30.245 | 323 | 0.12% |

**分析结论**:
- IP分布集中在 `9.166.30.*` 和 `9.166.58.*` 网段
- 前3个IP占67.43%的日志量，说明服务部署较为集中
- 有237条日志的IP字段为空

---

### 6. __ext.io_kubernetes_pod_namespace (Pod命名空间)

**统计摘要**:
- 唯一命名空间数: 1个
- 空值数量: 0条

**命名空间分布**:
| 命名空间 | 日志数量 | 占比 |
|----------|---------|------|
| blueking | 259,283 | 100% |

**分析结论**:
- 所有日志都来自 `blueking` 命名空间
- 命名空间分布单一，符合预期

---

### 7. __ext.io_kubernetes_pod_uid (Pod UID)

**统计摘要**:
- 唯一Pod UID数: 51个
- 空值数量: 0条

**Top 10 Pod UID分布**:
| Pod UID | 日志数量 | 占比 |
|---------|---------|------|
| 4fc17d25-85f2-468a-b73e-1689a287ac31 | 52,507 | 20.25% |
| d45be5a5-95fe-4d7b-934c-14976bd23989 | 62,993 | 24.29% |
| fef93234-50d0-4660-8d37-b6e6138ed030 | 59,345 | 22.89% |
| 4ed89a02-17ca-4941-b172-92612f2e263b | 32,851 | 12.67% |
| 560a00c3-e65e-4496-8188-7ffa54d85b0a | 14,695 | 5.67% |
| ecbb7931-9a16-45f1-bb47-19a294056ff1 | 14,078 | 5.43% |
| 570af928-c04e-49d8-9315-57f2bfad2aec | 17,423 | 6.72% |
| b8da530b-1145-464f-b8aa-890e0f7b507d | 647 | 0.25% |
| d8ff388f-86eb-44a5-bbb5-0fe138db9cb6 | 323 | 0.12% |
| da196c39-8b41-4ccc-bd14-95ecac8fbe4c | 661 | 0.25% |

**分析结论**:
- Pod UID分布与Pod名称分布一致
- 前3个UID占67.43%的日志量

---

### 8. __ext.io_kubernetes_workload_name (工作负载名称)

**统计摘要**:
- 唯一工作负载数: 51个
- 空值数量: 0条

**Top 10 工作负载分布**:
| 工作负载名称 | 日志数量 | 占比 |
|-------------|---------|------|
| bkpaas3-apiserver-web-5bdc57969b | 114,131 | 44.01% |
| bkpaas3-svc-bkrepo-web-558766447d | 62,993 | 24.29% |
| bkpaas3-svc-mysql-web-74fb8f566d | 59,345 | 22.89% |
| bkpaas3-webfe-web-7488d566 | 17,423 | 6.72% |
| bkpaas3-apiserver-worker-67d9fbdfb8 | 2,263 | 0.87% |
| bkpaas3-svc-mysql-deleting-instances-1766020500 | 176 | 0.07% |
| bkpaas3-apiserver-deleting-instances-1766039400 | 26 | 0.01% |
| bkpaas3-apiserver-deleting-instances-1766032200 | 21 | 0.01% |
| bkpaas3-apiserver-deleting-instances-1766048400 | 21 | 0.01% |
| bkpaas3-apiserver-deleting-instances-1766050200 | 22 | 0.01% |

**分析结论**:
- 工作负载分布高度集中，前4个工作负载占97.91%的日志量
- `bkpaas3-apiserver-web` 是主要的工作负载
- 存在大量定时任务工作负载（deleting-instances），但日志量很少

---

### 9. __ext.io_kubernetes_workload_type (工作负载类型)

**统计摘要**:
- 唯一工作负载类型数: 2个
- 空值数量: 0条

**工作负载类型分布**:
| 工作负载类型 | 日志数量 | 占比 |
|------------|---------|------|
| ReplicaSet | 256,155 | 98.79% |
| Job | 3,128 | 1.21% |

**分析结论**:
- 工作负载类型分布极不均衡
- 98.79%的日志来自 `ReplicaSet` 类型（长期运行的服务）
- 仅1.21%的日志来自 `Job` 类型（定时任务）

---

## 总体分析结论

### 1. 日志分布特征
- **高度集中**: 大部分日志集中在少数几个Pod和工作负载上
- **服务类型**: 主要是长期运行的Web服务（ReplicaSet），少量定时任务（Job）
- **命名空间**: 所有日志都在 `blueking` 命名空间

### 2. 主要服务组件
1. **bkpaas3-apiserver-web**: 占44.01%的日志量，是核心服务
2. **bkpaas3-svc-bkrepo-web**: 占24.29%的日志量
3. **bkpaas3-svc-mysql-web**: 占22.89%的日志量
4. **bkpaas3-webfe-web**: 占6.72%的日志量

### 3. 数据质量
- 大部分字段完整性良好，空值很少
- `__ext.io_kubernetes_pod_ip` 有237条空值（0.09%），需要关注

### 4. 建议
1. **监控重点**: 重点关注前4个工作负载的日志量和质量
2. **数据完整性**: 检查为什么部分日志的Pod IP为空
3. **资源分布**: 考虑是否需要调整Pod分布以平衡负载

---

**报告生成时间**: 2025-01-19
**分析工具**: 蓝鲸监控日志服务 MCP 工具


